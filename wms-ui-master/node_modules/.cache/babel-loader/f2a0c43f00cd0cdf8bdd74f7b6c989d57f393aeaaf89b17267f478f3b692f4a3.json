{"ast":null,"code":"import $http from \"../http/base.js\";\nexport default {\n  data() {\n    return {\n      ruleForm: {\n        name: \"admin\",\n        pwd: \"123456\"\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: \"请填写用户名!\",\n          trigger: \"blur\"\n        }],\n        pwd: [{\n          required: true,\n          message: \"请填写密码!\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      var t = this;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          $http.get(\"http://localhost:5268/api/Login\", {\n            params: {\n              name: t.ruleForm.name,\n              pwd: t.ruleForm.pwd\n            }\n          }).then(res => {\n            if (res == \"3\") {\n              this.$message({\n                message: \"账号或密码错误,请正确输入\",\n                type: \"error\"\n              });\n              return false;\n            }\n            //    $http.get('http://localhost:5149/api/Users/GetUsersByRoleId', {\n            //  params: {\n            //       name: t.ruleForm.name,\n            //         pwd: t.ruleForm.pwd\n            // }\n            // }).then(res1 => {\n            //     localStorage.setItem('id', res1.u_id);\n\n            //     sessionStorage.setItem('u_name', res1.u_name);\n            //     //       t.$router.push('main');\n            // console.log(res1);\n            // })\n            this.$message({\n              message: \"登录成功!\",\n              type: \"success\"\n            });\n            this.$store.commit(\"setRightList\", res.roles);\n            // this.$store.commit('setUsername', res.data.u_name)\n            localStorage.setItem(\"name\", res.data.u_True_name);\n            localStorage.setItem(\"a\", res.data.u_name);\n            localStorage.setItem(\"b\", res.data.u_True_name);\n            sessionStorage.setItem(\"token\", res.data.token);\n            localStorage.setItem(\"c\", res.data.u_id);\n            t.$router.push(\"main\");\n            console.log(res);\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    }\n    // submitForm(formName) {\n    //     var t = this;\n    //     this.$refs[formName].validate((valid) => {\n    //         if (valid) {\n    //                     t.$router.push('main');\n\n    //             // $http.get('http://localhost:5074/api/Users/Login', {\n    //             //     params: {\n    //             //         UserLName: t.ruleForm.name,\n    //             //         UserLPWD: t.ruleForm.pwd\n    //             //     }\n    //             // }\n    //             // ).then(res => {\n    //             //     console.log(res.data);\n    //             //     if (res == \"3\") {\n    //             //         this.$message({\n    //             //             message: \"账号或密码错误,请正确输入\",\n    //             //             type: 'error'\n    //             //         })\n    //             //         return false;\n    //             //     }\n    //             //     $http.get('http://localhost:5074/api/Users/SelectUsersId', {\n    //             //         params: {\n    //             //             username: t.ruleForm.name,\n    //             //             pwd: t.ruleForm.pwd\n    //             //         }\n    //             //     }).then(res => {\n    //             //         localStorage.setItem('id', res.userID);\n    //             //         localStorage.setItem('roel', res.roleID);\n    //             //         t.$router.push('main');\n\n    //             //     })\n    //             //     this.$message({\n    //             //         message: \"登录成功!\",\n    //             //         type: 'success'\n    //             //     })\n\n    //             //     localStorage.setItem('token', res);\n    //             //     localStorage.setItem('name', t.ruleForm.name);\n\n    //             // })\n    //         } else {\n    //             console.log('error submit!!');\n    //             return false;\n    //         }\n    //     });\n    // },\n  }\n};","map":{"version":3,"names":["$http","data","ruleForm","name","pwd","rules","required","message","trigger","methods","submitForm","formName","t","$refs","validate","valid","get","params","then","res","$message","type","$store","commit","roles","localStorage","setItem","u_True_name","u_name","sessionStorage","token","u_id","$router","push","console","log"],"sources":["src/components/Login.vue"],"sourcesContent":["<template>\r\n  <div id=\"hz1\">\r\n    <div class=\"z\">\r\n      <span style=\"float: left; margin-top: 20px; margin-left: 10px\"\r\n        ><img src=\"../Images/loho1.png\" width=\"350\" height=\"80px\"\r\n      /></span>\r\n      <!--左边 -->\r\n      <img class=\"s\" src=\"../Images/loginLeft.png\" width=\"800\" height=\"475\" />\r\n      <a\r\n        href=\"javascript:void(0)\"\r\n        style=\"\r\n          font-size: 13px;\r\n          color: #9031aa;\r\n          position: absolute;\r\n          bottom: 20px;\r\n          right: 180px;\r\n          text-decoration: none;\r\n        \"\r\n        >CopyRight © 2023 ModernWMS 版权所有<br />\r\n        <span style=\"color: #999999; text-decoration: none; padding-left: 58px\"\r\n          >闽ICP备2021008548号</span\r\n        ></a\r\n      >\r\n    </div>\r\n    <div class=\"y\">\r\n      <!--右边 -->\r\n      <el-form\r\n        :model=\"ruleForm\"\r\n        :rules=\"rules\"\r\n        ref=\"ruleForm\"\r\n        label-width=\"100px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <h3 style=\"margin-bottom: 30px; font-size: 19px\">\r\n          欢迎来到ModernWMS！<span>👋🏻</span>\r\n        </h3>\r\n        <el-form-item label=\"\" prop=\"name\" style=\"margin-left: -150px\">\r\n          <el-input\r\n            v-model=\"ruleForm.name\"\r\n            id=\"text\"\r\n            placeholder=\"Username\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"\" prop=\"pwd\" style=\"margin-left: -150px\">\r\n          <el-input\r\n            v-model=\"ruleForm.pwd\"\r\n            show-password\r\n            id=\"text\"\r\n            placeholder=\"Password\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-checkbox\r\n          label=\"记住账号密码\"\r\n          checked=\"checked\"\r\n          name=\"type\"\r\n          style=\"margin-left: -48px; color: #999999\"\r\n        ></el-checkbox>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm('ruleForm')\" id=\"delu\"\r\n            >登录</el-button\r\n          >\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport $http from \"../http/base.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      ruleForm: {\r\n        name: \"admin\",\r\n        pwd: \"123456\",\r\n      },\r\n      rules: {\r\n        name: [{ required: true, message: \"请填写用户名!\", trigger: \"blur\" }],\r\n        pwd: [{ required: true, message: \"请填写密码!\", trigger: \"blur\" }],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm(formName) {\r\n      var t = this;\r\n      this.$refs[formName].validate((valid) => {\r\n        if (valid) {\r\n          $http\r\n            .get(\"http://localhost:5268/api/Login\", {\r\n              params: {\r\n                name: t.ruleForm.name,\r\n                pwd: t.ruleForm.pwd,\r\n              },\r\n            })\r\n            .then((res) => {\r\n              if (res == \"3\") {\r\n                this.$message({\r\n                  message: \"账号或密码错误,请正确输入\",\r\n                  type: \"error\",\r\n                });\r\n                return false;\r\n              }\r\n              //    $http.get('http://localhost:5149/api/Users/GetUsersByRoleId', {\r\n              //  params: {\r\n              //       name: t.ruleForm.name,\r\n              //         pwd: t.ruleForm.pwd\r\n              // }\r\n              // }).then(res1 => {\r\n              //     localStorage.setItem('id', res1.u_id);\r\n\r\n              //     sessionStorage.setItem('u_name', res1.u_name);\r\n              //     //       t.$router.push('main');\r\n              // console.log(res1);\r\n              // })\r\n              this.$message({\r\n                message: \"登录成功!\",\r\n                type: \"success\",\r\n              });\r\n\r\n              this.$store.commit(\"setRightList\", res.roles);\r\n              // this.$store.commit('setUsername', res.data.u_name)\r\n              localStorage.setItem(\"name\", res.data.u_True_name);\r\n              localStorage.setItem(\"a\", res.data.u_name);\r\n              localStorage.setItem(\"b\", res.data.u_True_name);\r\n              sessionStorage.setItem(\"token\", res.data.token);\r\n              localStorage.setItem(\"c\", res.data.u_id);\r\n              t.$router.push(\"main\");\r\n              console.log(res);\r\n            });\r\n        } else {\r\n          console.log(\"error submit!!\");\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    // submitForm(formName) {\r\n    //     var t = this;\r\n    //     this.$refs[formName].validate((valid) => {\r\n    //         if (valid) {\r\n    //                     t.$router.push('main');\r\n\r\n    //             // $http.get('http://localhost:5074/api/Users/Login', {\r\n    //             //     params: {\r\n    //             //         UserLName: t.ruleForm.name,\r\n    //             //         UserLPWD: t.ruleForm.pwd\r\n    //             //     }\r\n    //             // }\r\n    //             // ).then(res => {\r\n    //             //     console.log(res.data);\r\n    //             //     if (res == \"3\") {\r\n    //             //         this.$message({\r\n    //             //             message: \"账号或密码错误,请正确输入\",\r\n    //             //             type: 'error'\r\n    //             //         })\r\n    //             //         return false;\r\n    //             //     }\r\n    //             //     $http.get('http://localhost:5074/api/Users/SelectUsersId', {\r\n    //             //         params: {\r\n    //             //             username: t.ruleForm.name,\r\n    //             //             pwd: t.ruleForm.pwd\r\n    //             //         }\r\n    //             //     }).then(res => {\r\n    //             //         localStorage.setItem('id', res.userID);\r\n    //             //         localStorage.setItem('roel', res.roleID);\r\n    //             //         t.$router.push('main');\r\n\r\n    //             //     })\r\n    //             //     this.$message({\r\n    //             //         message: \"登录成功!\",\r\n    //             //         type: 'success'\r\n    //             //     })\r\n\r\n    //             //     localStorage.setItem('token', res);\r\n    //             //     localStorage.setItem('name', t.ruleForm.name);\r\n\r\n    //             // })\r\n    //         } else {\r\n    //             console.log('error submit!!');\r\n    //             return false;\r\n    //         }\r\n    //     });\r\n    // },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\nhtml,\r\nbody,\r\n#app,\r\n#hz1 {\r\n  height: 100%;\r\n  background: #f4f5fa;\r\n}\r\n#text {\r\n  width: 360px;\r\n  height: 50px;\r\n  background-color: #fff;\r\n  box-shadow: 0px 1px 0px 0px #b7b9bf;\r\n  border-radius: 5px;\r\n}\r\n#delu {\r\n  width: 360px;\r\n  height: 45px;\r\n  background: #9031aa;\r\n  margin-left: -150px;\r\n  border-color: #9031aa;\r\n  margin-top: 20px;\r\n}\r\n.el-icon-view:before {\r\n  content: \"\\e6ce\";\r\n  margin-left: 62px;\r\n  line-height: 50px;\r\n}\r\n.z {\r\n  width: 1009px;\r\n  height: 100%;\r\n  background: #fff;\r\n  position: relative;\r\n  display: inline;\r\n  float: left;\r\n}\r\n.y {\r\n  float: right;\r\n  width: 410px;\r\n  height: 100%;\r\n  background: #f4f5fa;\r\n  position: relative;\r\n}\r\n.z .s {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.demo-ruleForm {\r\n  width: 60%;\r\n  transform: translate(30%, 200px);\r\n}\r\n</style>"],"mappings":"AAmEA,OAAAA,KAAA;AACA;EACAC,KAAA;IACA;MACAC,QAAA;QACAC,IAAA;QACAC,GAAA;MACA;MACAC,KAAA;QACAF,IAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,GAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,WAAAC,QAAA;MACA,IAAAC,CAAA;MACA,KAAAC,KAAA,CAAAF,QAAA,EAAAG,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACAf,KAAA,CACAgB,GAAA;YACAC,MAAA;cACAd,IAAA,EAAAS,CAAA,CAAAV,QAAA,CAAAC,IAAA;cACAC,GAAA,EAAAQ,CAAA,CAAAV,QAAA,CAAAE;YACA;UACA,GACAc,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA;cACA,KAAAC,QAAA;gBACAb,OAAA;gBACAc,IAAA;cACA;cACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;;YAEA;YACA;YACA;YACA;YACA,KAAAD,QAAA;cACAb,OAAA;cACAc,IAAA;YACA;YAEA,KAAAC,MAAA,CAAAC,MAAA,iBAAAJ,GAAA,CAAAK,KAAA;YACA;YACAC,YAAA,CAAAC,OAAA,SAAAP,GAAA,CAAAlB,IAAA,CAAA0B,WAAA;YACAF,YAAA,CAAAC,OAAA,MAAAP,GAAA,CAAAlB,IAAA,CAAA2B,MAAA;YACAH,YAAA,CAAAC,OAAA,MAAAP,GAAA,CAAAlB,IAAA,CAAA0B,WAAA;YACAE,cAAA,CAAAH,OAAA,UAAAP,GAAA,CAAAlB,IAAA,CAAA6B,KAAA;YACAL,YAAA,CAAAC,OAAA,MAAAP,GAAA,CAAAlB,IAAA,CAAA8B,IAAA;YACAnB,CAAA,CAAAoB,OAAA,CAAAC,IAAA;YACAC,OAAA,CAAAC,GAAA,CAAAhB,GAAA;UACA;QACA;UACAe,OAAA,CAAAC,GAAA;UACA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;;IAEA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}