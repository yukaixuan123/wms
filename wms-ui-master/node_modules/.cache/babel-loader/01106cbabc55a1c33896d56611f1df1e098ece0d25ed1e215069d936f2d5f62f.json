{"ast":null,"code":"import $http from '../http/base.js';\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      desc: \"\",\n      resource: \"\",\n      str: \"1=1\",\n      tableloading: false,\n      //加载\n      showDefaultAttr: true,\n      multipleSelection: [],\n      // 选中的行数据\n      formInline: {\n        dh: '',\n        lx: '',\n        ztai: '',\n        mc: ''\n      },\n      countryList: [],\n      tableData: [],\n      currentPage: 1,\n      //当前页\n      pagesize: 4,\n      //每页显示数\n      rows: 0,\n      //总行数\n      id: 0,\n      ii: \"\"\n    };\n  },\n  methods: {\n    //导出\n    daochu() {},\n    //导入\n    daoru() {},\n    //取消审核\n    qx() {\n      this.dialogFormVisible = false;\n      this.resource = \"\";\n    },\n    //确定审核\n    qd() {\n      var user = localStorage.getItem(\"name\");\n      $http.put(\"http://localhost:5149/api/Wh_outbill_h/Wh_outbill_hSH?name=\" + user + \"&zt=\" + this.resource + \"&desc=\" + this.desc + \"&ii=\" + this.ii).then(res => {\n        if (res) {\n          this.$message({\n            message: '审核成功！',\n            type: 'success'\n          });\n          this.dialogFormVisible = false;\n          this.FenYe();\n        }\n      }).catch(err => {\n        alert(err);\n      });\n      //添加库存\n      if (this.resource = 2) {\n        $http.post(\"http://localhost:5149/api/Wh_outbill_h/Wh_now_storage?dh=\" + this.ii).then(res => {\n          if (res) {}\n        }).catch(err => {\n          alert(err);\n        });\n      }\n    },\n    //审核\n    sh() {\n      if (this.multipleSelection.length == 0) {\n        this.$notify.error({\n          title: \"错误\",\n          message: \"请选择要进行审核的数据\"\n        });\n        return;\n      }\n      for (let i = 0; i < this.multipleSelection.length; i++) {\n        var zt = this.multipleSelection[i].outbill_state;\n        var ii = this.multipleSelection[i].outbill_code;\n      }\n      this.ii = ii;\n      if (zt == 0) {\n        this.dialogFormVisible = true;\n      } else if (zt == 1) {\n        this.$message({\n          message: \"无法执行该操作\",\n          type: \"warning\"\n        });\n        return;\n      } else if (zt == 2) {\n        this.$message({\n          message: \"无法执行该操作\",\n          type: \"warning\"\n        });\n        return;\n      }\n    },\n    //仓库下拉框\n    CK() {\n      var t = this;\n      $http.get(\"http://localhost:5149/api/Bs_warehouse/Bs_warehouseSelect\").then(res => {\n        t.countryList = res;\n      }).catch(err => {\n        alert(err);\n      });\n    },\n    //新增\n    insert() {\n      this.$router.push('/AddWh_outbill_h');\n    },\n    //编辑\n    handleEdit(i) {\n      if (i.outbill_state != 0) {\n        this.$message({\n          message: '无权限操作',\n          type: 'warning'\n        });\n        return;\n      }\n      this.$router.push('/UpdateWh_outbill_h?dh=' + i.outbill_code);\n    },\n    truncateString(str, length) {\n      return str.length > length ? str.slice(0, length) + '...' : str;\n    },\n    //查询方法\n    FenYe() {\n      var t = this;\n      $http.post(\"http://localhost:5149/api/Wh_outbill_h/Fen?page=\" + t.pagesize + \"&pageSize=\" + t.currentPage + \"&str=\" + t.str).then(res => {\n        t.tableData = res.list;\n        t.rows = res.rows;\n      }).catch(err => {\n        alert(err);\n      });\n    },\n    filterTime(timestamp) {\n      return formatDate(timestamp);\n    },\n    zt(i) {\n      if (i == 0) return \"草稿\";\n      if (i == 1) return \"待审核\";\n      if (i == 2) return \"驳回\";\n      if (i == 3) return \"已完成\";\n    },\n    //重置\n    reset() {\n      this.formInline = {\n        dh: \"\",\n        ztai: \"\",\n        mc: \"\",\n        lx: \"\"\n      };\n    },\n    //搜索\n    search() {\n      this.str = \"1=1\";\n      if (this.formInline.dh != \"\") {\n        this.str += \" AND outbill_code like CONCAT('%','\" + this.formInline.dh + \"','%') \";\n      }\n      if (this.formInline.lx != \"\") {\n        this.str += \" AND outbill_type like CONCAT('%','\" + this.formInline.lx + \"','%') \";\n      }\n      if (this.formInline.ztai != \"\") {\n        this.str += \" AND outbill_state like CONCAT('%','\" + this.formInline.ztai + \"','%') \";\n      }\n      if (this.formInline.mc != \"\") {\n        this.str += \" AND ware_code like CONCAT('%','\" + this.formInline.mc + \"','%') \";\n      }\n      this.FenYe();\n    },\n    //选择\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    },\n    //删除\n    handleDelete(i) {\n      this.$confirm('此操作将永久删除该信息, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        $http.put(\"   http://localhost:5149/api/Wh_inbill_h/Wh_inbill_hDelete?addStudenDto=\" + i).then(res => {\n          if (res) {\n            this.$message({\n              message: '删除成功！',\n              type: 'success'\n            });\n            this.FenYe();\n          }\n        }).catch(err => {\n          alert(err);\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'error',\n          message: '已取消删除'\n        });\n      });\n    },\n    //每页显示数改变事件\n    handleSizeChange(size) {\n      this.pagesize = size;\n      this.currentPage = 1;\n      this.FenYe();\n    },\n    //页码改变事件\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.FenYe();\n    },\n    //刷新table\n    flushed() {\n      this.tableloading = true;\n      // 模拟获取接口数据\n      setTimeout(() => {\n        //调用find();this.find();\n        this.tableloading = false;\n      }, 1000);\n      //直接this.查询方法();\n    },\n\n    //批量删除\n    delAll() {\n      const length = this.multipleSelection.length;\n      var strs = [];\n      for (let i = 0; i < this.multipleSelection.length; i++) {\n        strs.push(this.multipleSelection[i].inbill_code);\n      }\n      $http.put(\" http://localhost:5149/api/Wh_inbill_h/Wh_inbill_hDeleteS/route\", strs).then(res => {\n        if (res) {\n          this.$message({\n            message: '删除成功！',\n            type: 'success'\n          });\n          this.FenYe();\n        }\n      }).catch(err => {\n        alert(err);\n      });\n    }\n  },\n  mounted() {\n    this.tableloading = true;\n    // 模拟获取接口数据\n    setTimeout(() => {\n      this.FenYe();\n      this.tableloading = false;\n    }, 500);\n    this.CK();\n  }\n};\nexport function formatDate(date) {\n  let time = new Date(date);\n  let year = time.getFullYear();\n  let month = time.getMonth() + 1;\n  month = month.toString().padStart(2, \"0\");\n  let day = time.getDate().toString().padStart(2, \"0\");\n  return year + '年' + month + '月' + day + '日';\n}","map":{"version":3,"names":["$http","data","dialogFormVisible","desc","resource","str","tableloading","showDefaultAttr","multipleSelection","formInline","dh","lx","ztai","mc","countryList","tableData","currentPage","pagesize","rows","id","ii","methods","daochu","daoru","qx","qd","user","localStorage","getItem","put","then","res","$message","message","type","FenYe","catch","err","alert","post","sh","length","$notify","error","title","i","zt","outbill_state","outbill_code","CK","t","get","insert","$router","push","handleEdit","truncateString","slice","list","filterTime","timestamp","formatDate","reset","search","handleSelectionChange","val","console","log","handleDelete","$confirm","confirmButtonText","cancelButtonText","handleSizeChange","size","handleCurrentChange","page","flushed","setTimeout","delAll","strs","inbill_code","mounted","date","time","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate"],"sources":["src/components/Wh_outbill_h.vue"],"sourcesContent":["<template>\r\n    <div id=\"kj\">\r\n        <!--头部-->\r\n        <el-breadcrumb separator=\"/\" id=\"card\">\r\n            <el-breadcrumb-item :to=\"{ path: '/Home' }\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item><a href=\"javascript:void(0)\">出入库管理</a></el-breadcrumb-item>\r\n            <el-breadcrumb-item>出库管理</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <!--搜索-->\r\n\r\n        <transition-group name=\"lyric\">\r\n\r\n            <div id=\"form\" v-if=\"showDefaultAttr\" key=\"1\">\r\n                <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n                    <el-form-item label=\"出库单号\">\r\n                        <el-input v-model=\"formInline.dh\" id=\"tex\" placeholder=\"请输入\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"出库类型\">\r\n                        <el-select v-model=\"formInline.lx\" id=\"tex\" clearable filterable placeholder=\"请选择\">\r\n                            <el-option label=\"销售出库\" value=\"销售出库\"></el-option>\r\n                                <el-option label=\"调拨出库\" value=\"调拨出库\"></el-option>\r\n                                <el-option label=\"盘亏出库\" value=\"盘亏出库\"></el-option>\r\n                                <el-option label=\"退货出库\" value=\"退货出库\"></el-option>\r\n                                <el-option label=\"换货出库\" value=\"换货出库\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item label=\"单据状态\">\r\n                        <el-select v-model=\"formInline.ztai\" id=\"tex\" clearable filterable placeholder=\"请选择\">\r\n                            <el-option label=\"待审核\" value=\"0\"></el-option>\r\n                            <el-option label=\"已完成\" value=\"1\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"仓库名称\">\r\n                        <el-select v-model=\"formInline.mc\" id=\"tex\" clearable filterable placeholder=\"请选择\">\r\n                            <el-option v-for=\"item in countryList\" :key=\"item.warehouse_id\" :label=\"item.ware_name\"\r\n                                :value=\"item.ware_name\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n\r\n                    <el-form-item id=\"w\">\r\n                        <el-button @click=\"search()\" type=\"primary\" id=\"tex1\" icon=\"el-icon-search\">搜索</el-button>\r\n                        <el-button @click=\"reset()\" id=\"tex2\" icon=\"el-icon-refresh\">重置</el-button>\r\n                        <!-- <el-button type=\"primary\" @click=\"search\">高级搜索</el-button> -->\r\n                    </el-form-item>\r\n                </el-form>\r\n            </div>\r\n        </transition-group>\r\n\r\n        <!--按钮-->\r\n        <div id=\"an\">\r\n            <el-button id=\"tex3\" icon=\"el-icon-plus\" @click=\"insert()\">新增</el-button>\r\n            <!-- <el-button  id=\"tex4\"  icon=\"el-icon-edit\">修改</el-button> -->\r\n            <el-button id=\"tex5\" @click=\"delAll()\" icon=\"el-icon-delete\"\r\n                :disabled=\"multipleSelection.length == 0\">删除</el-button>\r\n            <el-button id=\"tex7\" :disabled=\"multipleSelection.length > 1\" @click=\"sh()\"\r\n                icon=\"el-icon-setting\">审核</el-button>\r\n           \r\n\r\n\r\n        </div>\r\n\r\n        <!--隐藏-->\r\n        <div id=\"an1\">\r\n            <el-button icon=\"el-icon-upload\" circle @click=\"daoru\" title=\"导入\"></el-button>\r\n            <el-button icon=\"el-icon-download\" circle @click=\"daochu\" title=\"导出\"></el-button>\r\n\r\n            <el-button icon=\"el-icon-search\" circle @click=\"showDefaultAttr = !showDefaultAttr\" title=\"展开\"></el-button>\r\n            <el-button icon=\"el-icon-refresh\" circle @click=\"flushed\" title=\"刷新\"></el-button>\r\n        </div>\r\n        <!-- 表单 -->\r\n        <el-table tooltip-effect=\"dark\" v-loading=\"tableloading\" @selection-change=\"handleSelectionChange\" :data=\"tableData\"\r\n            :header-cell-style=\"{ background: '#F8F8F9', color: '#606266' }\" id=\"tableMain\" element-loading-text=\"拼命加载中\"\r\n            element-loading-spinner=\"el-icon-loading\" height=\"320px\">\r\n            <el-table-column type=\"selection\" width=\"55\">\r\n            </el-table-column>\r\n           \r\n            <el-table-column fixed prop=\"outbill_code\" label=\"出库单号\" width=\"150\">\r\n                <template slot-scope=\"{ row }\">\r\n                    <router-link :to=\"{ name: 'DetailedWh_outbill_h', query: { dh: row.outbill_code } }\">{{ row.outbill_code\r\n                    }}</router-link>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column fixed prop=\"outbill_type\" label=\"出库类型\" width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column fixed label=\"状态\" width=\"120\">\r\n                <template slot-scope=\"scope\">\r\n                    <span v-if=\"scope.row.outbill_state == 0\"\r\n                        style=\"color: blue;font-weight: 600;font-size: 13px;\">待审核</span>\r\n                   \r\n                    <span v-if=\"scope.row.outbill_state == 2\"\r\n                        style=\"color: green;font-weight: 600;font-size: 13px;\">已完成</span>\r\n\r\n                </template>\r\n\r\n            </el-table-column>\r\n            <el-table-column fixed label=\"出库日期\" width=\"150\">\r\n                <template slot-scope='scope'>\r\n                    <span>{{ filterTime(scope.row.outbill_date) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"ware_code\" label=\"仓库名称\" width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"sale_code\" label=\"关联单号\" width=\"120\">\r\n            </el-table-column>\r\n             <el-table-column prop=\"cust_code\" label=\"客户名称\" width=\"120\">\r\n                </el-table-column>\r\n                 <el-table-column prop=\"link_man\" label=\"联系人\" width=\"120\">\r\n                </el-table-column>\r\n                 <el-table-column prop=\"link_way\" label=\"联系方式\" width=\"120\">\r\n                </el-table-column>\r\n            <el-table-column prop=\"names\" label=\"出库货品\" width=\"180\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-popover placement=\"top\" trigger=\"hover\">\r\n                        <p>{{ scope.row.names }}</p>\r\n                        <div slot=\"reference\">{{ truncateString(scope.row.names, 10) }}</div>\r\n                    </el-popover>\r\n                </template>\r\n            </el-table-column>\r\n           \r\n            <el-table-column prop=\"total_buy_num\" label=\"出库数量\" width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"total_price\" label=\"出库金额\" width=\"120\">\r\n            </el-table-column>\r\n             <el-table-column prop=\"duty_man\" label=\"经办人\" width=\"120\">\r\n                </el-table-column>\r\n            <el-table-column prop=\"create_by\" label=\"制单人\" width=\"120\">\r\n            </el-table-column>\r\n            <el-table-column label=\"制单时间\" width=\"150\">\r\n                <template slot-scope='scope'>\r\n                    <span>{{ filterTime(scope.row.create_time) }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"sure_man\" label=\"审核人\" width=\"120\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"审核时间\" width=\"150\">\r\n                <template slot-scope='scope'>\r\n                    <span v-if=\"scope.row.sure_date != '0001-01-01T00:00:00'\">{{ filterTime(scope.row.sure_date) }}</span>\r\n                    <span v-else></span>\r\n\r\n                </template>\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作\" fixed=\"right\" width=\"100\">\r\n                <template slot-scope=\"scope\">\r\n                    <img src=\"../Images/bianji1.png\" title=\"编辑\" width=\"25px\" height=\"25px\" @click=\"handleEdit(scope.row)\">\r\n                    <img src=\"../Images/shanchu.png\" width=\"28px\" height=\"28px\" style=\"margin-left: 5px;\" title=\"删除\"\r\n                        @click=\"handleDelete(scope.row.inbill_code)\">\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 分页 -->\r\n        <el-pagination id=\"fenye\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage\" :page-sizes=\"[4, 8, 12, 16]\" :page-size=\"pagesize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\" :total=\"rows\">\r\n        </el-pagination>\r\n\r\n        <!-- 审核 -->\r\n        <el-dialog title=\"审核\" :visible.sync=\"dialogFormVisible\" width=\"430px\" id=\"tjshh\">\r\n            <el-form style=\"height: 225px\">\r\n                <el-form-item label=\"审核结果\">\r\n                    <el-radio-group v-model=\"resource\" id=\"dx\">\r\n                        <el-radio v-model=\"resource\" label=\"2\" value=\"2\">通过</el-radio>\r\n                        <el-radio label=\"1\" value=\"1\">驳回</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item label=\"审核意见\">\r\n                    <el-input type=\"textarea\" id=\"yj\" v-model=\"desc\"></el-input>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button id=\"gb1\" @click=\"qx()\">取 消</el-button>\r\n                <el-button id=\"bc12\" style=\"background-color: #9c27b0; color: #fff\" @click=\"qd()\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $http from '../http/base.js';\r\nexport default {\r\n    data() {\r\n        return {\r\n            dialogFormVisible: false,\r\n            desc: \"\",\r\n            resource: \"\",\r\n            str: \"1=1\",\r\n            tableloading: false,//加载\r\n            showDefaultAttr: true,\r\n            multipleSelection: [],// 选中的行数据\r\n            formInline: {\r\n                dh: '',\r\n                lx: '',\r\n                ztai: '',\r\n                mc: '',\r\n            },\r\n            countryList: [],\r\n            tableData: [],\r\n            currentPage: 1,//当前页\r\n            pagesize: 4,//每页显示数\r\n            rows: 0,//总行数\r\n            id: 0,\r\n            ii: \"\",\r\n        }\r\n\r\n    },\r\n    methods: {\r\n\r\n        //导出\r\n        daochu() {\r\n\r\n        },\r\n        //导入\r\n        daoru() {\r\n\r\n        },\r\n        //取消审核\r\n        qx() {\r\n            this.dialogFormVisible = false;\r\n            this.resource = \"\";\r\n        },\r\n        //确定审核\r\n        qd() {\r\n            var user = localStorage.getItem(\"name\");\r\n            $http\r\n                .put(\"http://localhost:5149/api/Wh_outbill_h/Wh_outbill_hSH?name=\" + user + \"&zt=\" + this.resource  + \"&desc=\" + this.desc + \"&ii=\" + this.ii)\r\n                .then(res => {\r\n                    if (res) {\r\n                        this.$message({\r\n                            message: '审核成功！',\r\n                            type: 'success'\r\n                        });\r\n                        this.dialogFormVisible = false;\r\n                        this.FenYe();\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    alert(err);\r\n                });\r\n                //添加库存\r\n            if (this.resource = 2) {\r\n                $http\r\n                    .post(\"http://localhost:5149/api/Wh_outbill_h/Wh_now_storage?dh=\" + this.ii)\r\n                    .then(res => {\r\n                        if (res) {\r\n\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        alert(err);\r\n                    });\r\n            }\r\n\r\n        },\r\n        //审核\r\n        sh() {\r\n            if (this.multipleSelection.length == 0) {\r\n                this.$notify.error({\r\n                    title: \"错误\",\r\n                    message: \"请选择要进行审核的数据\",\r\n                });\r\n                return;\r\n            }\r\n            for (let i = 0; i < this.multipleSelection.length; i++) {\r\n                var zt = this.multipleSelection[i].outbill_state;\r\n                var ii = this.multipleSelection[i].outbill_code;\r\n             \r\n            }\r\n           \r\n            this.ii = ii;\r\n            if (zt == 0) {\r\n                this.dialogFormVisible = true;\r\n            } else if (zt == 1) {\r\n                this.$message({\r\n                    message: \"无法执行该操作\",\r\n                    type: \"warning\",\r\n                });\r\n                return;\r\n            } else if (zt == 2) {\r\n                this.$message({\r\n                    message: \"无法执行该操作\",\r\n                    type: \"warning\",\r\n                });\r\n                return;\r\n            }\r\n        },\r\n\r\n        //仓库下拉框\r\n        CK() {\r\n            var t = this;\r\n            $http\r\n                .get(\"http://localhost:5149/api/Bs_warehouse/Bs_warehouseSelect\")\r\n                .then(res => {\r\n                    t.countryList = res;\r\n                })\r\n                .catch(err => {\r\n                    alert(err);\r\n                });\r\n\r\n        },\r\n        //新增\r\n        insert() {\r\n\r\n            this.$router.push('/AddWh_outbill_h');\r\n\r\n        },\r\n        //编辑\r\n        handleEdit(i) {\r\n            if (i.outbill_state != 0) {\r\n                this.$message({\r\n                    message: '无权限操作',\r\n                    type: 'warning'\r\n                });\r\n                return;\r\n            }\r\n            this.$router.push('/UpdateWh_outbill_h?dh=' + i.outbill_code);\r\n        },\r\n        truncateString(str, length) {\r\n            return str.length > length ? str.slice(0, length) + '...' : str;\r\n        },\r\n\r\n        //查询方法\r\n        FenYe() {\r\n            var t = this;\r\n            $http\r\n                .post(\r\n                    \"http://localhost:5149/api/Wh_outbill_h/Fen?page=\" +\r\n                    t.pagesize +\r\n                    \"&pageSize=\" +\r\n                    t.currentPage + \"&str=\" + t.str\r\n                )\r\n                .then(res => {\r\n\r\n                    t.tableData = res.list;\r\n                    t.rows = res.rows;\r\n                })\r\n                .catch(err => {\r\n                    alert(err);\r\n                });\r\n\r\n        },\r\n        filterTime(timestamp) {\r\n            return formatDate(timestamp)\r\n        },\r\n        zt(i) {\r\n            if (i == 0)\r\n                return \"草稿\"\r\n            if (i == 1)\r\n                return \"待审核\"\r\n            if (i == 2)\r\n                return \"驳回\"\r\n            if (i == 3)\r\n                return \"已完成\"\r\n        },\r\n        //重置\r\n        reset() {\r\n            this.formInline = {\r\n                dh: \"\",\r\n                ztai: \"\",\r\n                mc: \"\",\r\n                lx: \"\",\r\n            };\r\n        },\r\n\r\n        //搜索\r\n        search() {\r\n            this.str = \"1=1\";\r\n            if (this.formInline.dh != \"\") {\r\n                this.str += \" AND outbill_code like CONCAT('%','\" + this.formInline.dh + \"','%') \";\r\n            }\r\n            if (this.formInline.lx != \"\") {\r\n                this.str += \" AND outbill_type like CONCAT('%','\" + this.formInline.lx + \"','%') \";\r\n            }\r\n            if (this.formInline.ztai != \"\") {\r\n                this.str += \" AND outbill_state like CONCAT('%','\" + this.formInline.ztai + \"','%') \";\r\n            }\r\n            if (this.formInline.mc != \"\") {\r\n                this.str += \" AND ware_code like CONCAT('%','\" + this.formInline.mc + \"','%') \";\r\n            }\r\n\r\n            this.FenYe();\r\n        },\r\n        //选择\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val;\r\n            console.log(this.multipleSelection);\r\n        },\r\n        //删除\r\n        handleDelete(i) {\r\n            this.$confirm('此操作将永久删除该信息, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n\r\n                $http\r\n                    .put(\"   http://localhost:5149/api/Wh_inbill_h/Wh_inbill_hDelete?addStudenDto=\" + i)\r\n                    .then(res => {\r\n                        if (res) {\r\n                            this.$message({\r\n                                message: '删除成功！',\r\n                                type: 'success'\r\n                            });\r\n                            this.FenYe();\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        alert(err);\r\n                    });\r\n            }).catch(() => {\r\n                this.$message({\r\n                    type: 'error',\r\n                    message: '已取消删除'\r\n                });\r\n            });\r\n        },\r\n        //每页显示数改变事件\r\n        handleSizeChange(size) {\r\n            this.pagesize = size;\r\n            this.currentPage = 1;\r\n            this.FenYe();\r\n          \r\n        },\r\n        //页码改变事件\r\n        handleCurrentChange(page) {\r\n            this.currentPage = page;\r\n            this.FenYe();\r\n          \r\n        },\r\n        //刷新table\r\n        flushed() {\r\n            this.tableloading = true\r\n            // 模拟获取接口数据\r\n            setTimeout(() => {\r\n                //调用find();this.find();\r\n                this.tableloading = false\r\n            }, 1000)\r\n            //直接this.查询方法();\r\n        },\r\n        //批量删除\r\n        delAll() {\r\n            const length = this.multipleSelection.length;\r\n            var strs = [];\r\n            for (let i = 0; i < this.multipleSelection.length; i++) {\r\n\r\n                strs.push(this.multipleSelection[i].inbill_code);\r\n            }\r\n            $http\r\n                .put(\" http://localhost:5149/api/Wh_inbill_h/Wh_inbill_hDeleteS/route\", strs)\r\n                .then(res => {\r\n                    if (res) {\r\n                        this.$message({\r\n                            message: '删除成功！',\r\n                            type: 'success'\r\n                        });\r\n                        this.FenYe();\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    alert(err);\r\n                });\r\n\r\n\r\n        },\r\n    },\r\n    mounted() {\r\n        this.tableloading = true\r\n        // 模拟获取接口数据\r\n        setTimeout(() => {\r\n\r\n            this.FenYe();\r\n            this.tableloading = false\r\n        }, 500)\r\n\r\n        this.CK();\r\n    }\r\n}\r\nexport function formatDate(date) {\r\n\r\n    let time = new Date(date);\r\n\r\n    let year = time.getFullYear();\r\n\r\n    let month = time.getMonth() + 1;\r\n    month = month.toString().padStart(2, \"0\");\r\n    let day = time.getDate().toString().padStart(2, \"0\")\r\n    return year + '年' + month + '月' + day + '日'\r\n}\r\n</script>\r\n<style scoped src=\"../CSS/public.css\"></style>\r\n\r\n<style>\r\n#w {\r\n    margin-left: 20px;\r\n}\r\n\r\n#card {\r\n    height: 35px;\r\n    line-height: 35px;\r\n    margin-left: 20px;\r\n}\r\n\r\n#form {\r\n    margin-top: 15px;\r\n    width: 1020px;\r\n    box-shadow: 0px 1px 0px rgba(0, 0, 0, 0.2);\r\n    margin-left: 65px;\r\n}\r\n\r\n#form_top {\r\n    margin-right: 25px !important;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.el-col-2 {\r\n    width: 30px;\r\n    text-align: center;\r\n}\r\n\r\n.el-form--inline .el-form-item__label {\r\n    float: none;\r\n    display: inline-block;\r\n    font-weight: bold;\r\n    font-size: 13px;\r\n}\r\n\r\n#tex {\r\n    width: 240px;\r\n    height: 32px;\r\n}\r\n\r\n#tex1 {\r\n    width: 28px !important;\r\n    color: #FFF;\r\n    background-color: #409EFF;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n    margin-left: 20px;\r\n}\r\n\r\n#tex2 {\r\n    width: 28px !important;\r\n    color: #000;\r\n    background-color: #fff;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n}\r\n\r\n#tex3 {\r\n    border: 1px solid #ADD2FB;\r\n    color: #448EF8;\r\n    background-color: #EAF4FE;\r\n    width: 28px !important;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n    margin-left: 20px;\r\n}\r\n\r\n#tex4 {\r\n    border: 1px solid #D7F4E1;\r\n    color: #8EDFA8;\r\n    background-color: #EBF9F1;\r\n    width: 28px !important;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n    margin-left: 20px;\r\n}\r\n\r\n#tex5 {\r\n    border: 1px solid #F9DCDC;\r\n    color: #F29895;\r\n    background-color: #FCEEED;\r\n    width: 28px !important;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n    margin-left: 20px;\r\n}\r\n\r\n#tex6 {\r\n    border: 1px solid #FAE4A2;\r\n    color: #F8C341;\r\n    background-color: #FEF8E8;\r\n    width: 28px !important;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n    margin-left: 20px;\r\n}\r\n\r\n#tex7 {\r\n    border: 1px solid #D3D4D6;\r\n    color: #919398;\r\n    background-color: #F4F4F5;\r\n    width: 28px !important;\r\n    line-height: 28px !important;\r\n    width: 73px !important;\r\n    padding: 0px !important;\r\n    margin-left: 20px;\r\n}\r\n\r\n#tex3:hover {\r\n    background-color: #409EFF;\r\n    color: #fff;\r\n}\r\n\r\n#tex4:hover {\r\n    background-color: #5FCB71;\r\n    color: #fff;\r\n}\r\n\r\n#tex5:hover {\r\n    background-color: #ff4949;\r\n    color: #fff;\r\n}\r\n\r\n#tex6:hover {\r\n    background-color: #F5BD41;\r\n    color: #fff;\r\n}\r\n\r\n#tex7:hover {\r\n    background-color: #919398;\r\n    color: #fff;\r\n}\r\n\r\n#an1 {\r\n    float: right;\r\n    position: relative;\r\n    top: 9px;\r\n    right: 64px;\r\n}\r\n\r\n.lyric-enter,\r\n.lyric-leave-to {\r\n    opacity: 0;\r\n    transform: translateY(15px);\r\n}\r\n\r\n.lyric-enter-to,\r\n.lyric-leave {\r\n    opacity: 1;\r\n}\r\n\r\n.lyric-enter-active,\r\n.lyric-leave-active {\r\n    transition: all 0.4s ease-out;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}