{"ast":null,"code":"import $http from \"@/http/base\";\nimport axios from \"axios\";\nexport function formatDate(date) {\n  let time = new Date(date);\n  let year = time.getFullYear();\n  let month = time.getMonth() + 1;\n  month = month.toString().padStart(2, \"0\");\n  let day = time.getDate().toString().padStart(2, \"0\");\n  return year + \"年\" + month + \"月\" + day + \"日\";\n}\nexport default {\n  data() {\n    return {\n      activeIndex: \"1\",\n      formInline: {\n        dh: \"\",\n        lx: \"\",\n        mc: \"\",\n        date: \"\",\n        bei: \"\",\n        lxr: \"\",\n        fs: \"\",\n        gldh: \"\",\n        gys: \"\",\n        sj: \"\",\n        zt: \"\",\n        rk: \"\",\n        ck: \"\",\n        cjr: \"\",\n        cjsj: \"\",\n        gxr: \"\",\n        gxsj: \"\",\n        px: \"\"\n      },\n      tableData: [],\n      tableData1: [],\n      tableData2: [],\n      tableData3: [],\n      Imager: [],\n      ii: \"\",\n      currentPage: 1,\n      //当前页\n      pagesize: 4,\n      //每页显示数\n      rows: 0,\n      //总行数\n      str: \"1=1\",\n      multipleSelection: [],\n      yrksl: 0,\n      zje: 0,\n      activeName: \"first\"\n    };\n  },\n  methods: {\n    //每页显示数改变事件\n    handleSizeChange(size) {\n      this.pagesize = size;\n      this.currentPage = 1;\n      this.FenYe();\n    },\n    //页码改变事件\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.FenYe();\n    },\n    FenYe() {\n      var id = this.$route.query.dh;\n      console.log(id);\n      $http.get(\"http://localhost:5149/api/Bs_item/FindGoodsIfoByItem_Id?id=\" + id).then(res => {\n        this.formInline.lx = res.item_type_name;\n        this.formInline.dh = res.item_code;\n        this.formInline.ck = res.outbill_price;\n        this.formInline.rk = res.inbill_price;\n        this.formInline.cjr = res.create_by;\n        this.formInline.cjsj = res.create_time;\n        this.formInline.gxr = res.update_by;\n        this.formInline.gxsj = res.update_time;\n        this.formInline.zt = res.inbill_state;\n        this.formInline.gys = res.model_code;\n        this.formInline.mc = res.unit;\n        this.formInline.bei = res.remark;\n        // debugger;\n        console.log(res);\n        //  this.Imager = res.imgUrl;\n        var imgUrls = res.imgUrl;\n        if (imgUrls) {\n          var imgUrlArray = imgUrls.split(\",\");\n          for (let index = 0; index < imgUrlArray.length; index++) {\n            const element = imgUrlArray[index];\n            this.Imager.push(\"http://localhost:5149/api/images/\" + element);\n          }\n        } else {\n          this.Imager.push(\"http://localhost:5149/api/images/OIP-C.jpg\");\n        }\n        console.log(this.Imager);\n      });\n    },\n    //关闭\n    gb() {\n      this.$router.go(-1);\n    },\n    //导出\n    exportRow() {\n      //alert(1);\n      const apiUrl = \"http://localhost:5149/api/Export\";\n      const dummyData = this.tableData3.map(item => ({\n        ...item,\n        sure_man: item.sure_man || \"null\",\n        update_by: item.update_by || \"null\",\n        sure_state: item.sure_state || \"null\"\n      }));\n      console.log(dummyData);\n      $http.post(apiUrl, dummyData).then(response => {\n        console.log(response);\n        // Handle the response, for example, download the exported file\n        this.downloadFile(response, \"exportedData.csv\");\n      }).catch(error => {\n        alert(\"导出失败\");\n        console.error(\"Export failed\", error);\n      });\n    },\n    downloadFile(data, fileName) {\n      const blob = new Blob([data], {\n        type: \"application/octet-stream\"\n      });\n      const link = document.createElement(\"a\");\n      link.href = window.URL.createObjectURL(blob);\n      link.download = fileName;\n      link.click();\n    },\n    fzcg() {\n      this.$message({\n        message: \"复制成功\",\n        type: \"success\"\n      });\n    },\n    //下标\n    handleSelect(key, keyPath) {\n      console.log(key, keyPath);\n    },\n    //选择\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    },\n    //根据id查进货订单\n    Jia() {\n      var bh = this.$route.query.dh;\n\n      // $http\n      //     .get(\"  http://localhost:5149/api/Wh_inbill_h/Wh_inbill_hMH?bh=\" + bh)\n      //     .then(res => {\n\n      //         this.formInline.dh = res.inbill_bh;\n      //         this.formInline.gldh = res.buy_code;\n      //         this.formInline.lx = res.inbill_type;\n      //         this.formInline.mc = res.ware_name;\n      //         this.formInline.date = res.inbll_date;\n      //         this.formInline.bei = res.remark;\n      //         this.formInline.lxr = res.link_man;\n      //         this.formInline.fs = res.link_way;\n      //         this.formInline.gys = res.supply_code;\n      //         this.formInline.jbr = res.inbill_duty_man;\n      //         this.formInline.sj = res.create_time;\n      //         this.formInline.zt = res.inbill_state;\n      //         this.ii = res.inbill_id;\n\n      //     })\n      //     .catch(err => {\n      //         alert(err);\n      //     });\n    },\n\n    //进货明细\n    find() {\n      var item_code = this.$route.query.item_code;\n      $http.get(\"http://localhost:5149/api/Bs_item/FindPurchaseRecord?item_code=\" + item_code).then(res => {\n        this.tableData3 = res;\n        console.log(res);\n      });\n      //var bh = this.$route.query.dh\n      // $http\n      //     .get(\"  http://localhost:5149/api/Wh_inbill_h/Wh_inbill_dMH?bh=\" + bh)\n      //     .then(res => {\n      //         this.tableData = res;\n      //         for (let i = 0; i < this.tableData.length; i++) {\n      //             this.yrksl += this.tableData[i].inbill_num;\n      //             this.zje +=\n      //                 this.tableData[i].zong;\n\n      //         }\n\n      //     })\n      //     .catch(err => {\n      //         alert(err);\n      //     });\n    },\n\n    //时间格式化\n    filterTime(timestamp) {\n      return formatDate(timestamp);\n    },\n    handleClick(tab, event) {\n      console.log(tab, event);\n    }\n  },\n  mounted() {\n    this.Jia();\n    this.find();\n    this.FenYe();\n  }\n};","map":{"version":3,"names":["$http","axios","formatDate","date","time","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","data","activeIndex","formInline","dh","lx","mc","bei","lxr","fs","gldh","gys","sj","zt","rk","ck","cjr","cjsj","gxr","gxsj","px","tableData","tableData1","tableData2","tableData3","Imager","ii","currentPage","pagesize","rows","str","multipleSelection","yrksl","zje","activeName","methods","handleSizeChange","size","FenYe","handleCurrentChange","page","id","$route","query","console","log","get","then","res","item_type_name","item_code","outbill_price","inbill_price","create_by","create_time","update_by","update_time","inbill_state","model_code","unit","remark","imgUrls","imgUrl","imgUrlArray","split","index","length","element","push","gb","$router","go","exportRow","apiUrl","dummyData","map","item","sure_man","sure_state","post","response","downloadFile","catch","error","alert","fileName","blob","Blob","type","link","document","createElement","href","window","URL","createObjectURL","download","click","fzcg","$message","message","handleSelect","key","keyPath","handleSelectionChange","val","Jia","bh","find","filterTime","timestamp","handleClick","tab","event","mounted"],"sources":["src/components/DetailedGoodsInfo.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"adds\">\r\n      <h3 style=\"margin-left: 35px; padding-top: 30px; display: inline-block\">\r\n        货品单号：{{ formInline.dh }}\r\n\r\n        <img\r\n          src=\"../Images/fz.png\"\r\n          width=\"20px\"\r\n          height=\"20px\"\r\n          style=\"vertical-align: middle; margin-left: 120px\"\r\n          @click=\"fzcg\"\r\n        />\r\n      </h3>\r\n\r\n      <div style=\"float: right; padding-top: 30px; margin-right: 35px\">\r\n        <!-- <el-button id=\"tex3\" @click=\"inserok()\" icon=\"el-icon-plus\">编辑</el-button> -->\r\n        <!-- <el-button  id=\"tex4\"  icon=\"el-icon-edit\">修改</el-button> -->\r\n        <el-button id=\"tex5\" @click=\"delAll()\" icon=\"el-icon-delete\"\r\n          >撤销</el-button\r\n        >\r\n        <el-button id=\"tex6\" icon=\"el-icon-download\">打印</el-button>\r\n      </div>\r\n\r\n      <div class=\"block\">\r\n        <el-carousel trigger=\"click\" height=\"250px\">\r\n          <el-carousel-item\r\n            v-for=\"item in Imager\"\r\n            :key=\"item\"\r\n            style=\"border-radius: 5px\"\r\n          >\r\n            <img :src=\"item\" />\r\n          </el-carousel-item>\r\n        </el-carousel>\r\n      </div>\r\n      <!-- <div class=\"demo-image__lazy\">\r\n          <el-image\r\n            v-for=\"item in Imager\"\r\n            :key=\"item\"\r\n            :src=\"item\"\r\n            lazy\r\n            style=\"width: 200px; height: 200px\"\r\n          ></el-image>\r\n        </div> -->\r\n\r\n      <table\r\n        style=\"\r\n          width: 945px;\r\n          line-height: 55px;\r\n          position: relative;\r\n          right: -375px;\r\n          top: -266px;\r\n        \"\r\n      >\r\n        <tr>\r\n          <td>\r\n            入库类型<i style=\"margin-left: 50px; color: #999999\">{{\r\n              formInline.lx\r\n            }}</i>\r\n          </td>\r\n\r\n          <td>\r\n            创建时间<i style=\"margin-left: 50px; color: #999999\">{{\r\n              filterTime(formInline.cjsj)\r\n            }}</i>\r\n          </td>\r\n          <td style=\"position: relative; left: -100px\">\r\n            状态<i style=\"margin-left: 30px; font-weight: bold\">{{\r\n              formInline.zt ? \"启用\" : \"停用\"\r\n            }}</i>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            单位<i style=\"margin-left: 50px; color: #999999\">{{\r\n              formInline.mc\r\n            }}</i>\r\n          </td>\r\n          <td>\r\n            更新日期<i style=\"margin-left: 50px; color: #999999\">{{\r\n              filterTime(formInline.gxsj)\r\n            }}</i>\r\n          </td>\r\n          <td style=\"position: relative; left: -100px\">\r\n            创建人<i style=\"margin-left: 30px; color: #999999\">{{\r\n              formInline.cjr\r\n            }}</i>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            更新人<i style=\"margin-left: 50px; color: #999999\">{{\r\n              formInline.gxr\r\n            }}</i>\r\n          </td>\r\n          <td>\r\n            备注<i style=\"margin-left: 65px; color: #999999\">{{\r\n              formInline.bei\r\n            }}</i>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            规格型号<i style=\"margin-left: 50px; color: #999999\">{{\r\n              formInline.gys\r\n            }}</i>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n    </div>\r\n\r\n    <div id=\"addxxgty\">\r\n      <el-tabs id=\"menu\" v-model=\"activeName\" @tab-click=\"handleClick\">\r\n        <el-tab-pane label=\"入库明细\" style=\"margin-top: -10px\" name=\"first\">\r\n          <el-button id=\"tex9\" icon=\"el-icon-download\">导出</el-button>\r\n          <el-table\r\n            tooltip-effect=\"dark\"\r\n            @selection-change=\"handleSelectionChange\"\r\n            :data=\"tableData\"\r\n            :header-cell-style=\"{\r\n              background: '#F8F8F9',\r\n              color: '#606266',\r\n              'text-align': 'center',\r\n            }\"\r\n            :cell-style=\"{ 'text-align': 'center' }\"\r\n            id=\"jhmx\"\r\n            height=\"300px\"\r\n          >\r\n            <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n            <el-table-column label=\"序号\" type=\"index\" width=\"50\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"item_name\" label=\"货品名称\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"item_code\" label=\"货品编号\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"model_code\" label=\"规格型号\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"unit\" label=\"单位\" width=\"115px\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"area_code\" label=\"入库仓位\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"buy_price\" label=\"入库单价\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"inbill_num\" label=\"入库数量\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"zong\" label=\"入库金额\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"batch_no\" label=\"批次号\" width=\"100\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"remark\" label=\"备注\" width=\"180\">\r\n            </el-table-column>\r\n          </el-table>\r\n          <div id=\"hj\">\r\n            <span style=\"line-height: 45px; font-size: 12px; margin-left: 25px\"\r\n              >合计</span\r\n            >\r\n            <p style=\"float: right\">\r\n              <span style=\"line-height: 45px; font-size: 12px\">入库数量：</span>\r\n              <span\r\n                style=\"\r\n                  line-height: 45px;\r\n                  font-weight: bold;\r\n                  color: red;\r\n                  font-size: 12px;\r\n                  margin-right: 35px;\r\n                \"\r\n                >{{ yrksl }}</span\r\n              >\r\n              <span style=\"line-height: 45px; font-size: 12px\">入库金额：</span>\r\n              <span\r\n                style=\"\r\n                  line-height: 45px;\r\n                  font-weight: bold;\r\n                  color: red;\r\n                  font-size: 12px;\r\n                  margin-right: 30px;\r\n                \"\r\n                id=\"sumSalary\"\r\n                >{{ zje }}￥</span\r\n              >\r\n            </p>\r\n          </div>\r\n        </el-tab-pane>\r\n        <!-- <el-tab-pane label=\"操作记录\" name=\"second\">\r\n                    <el-button id=\"tex9\" icon=\"el-icon-download\">导出</el-button>\r\n                  \r\n                 \r\n                </el-tab-pane> -->\r\n        <el-tab-pane label=\"审核记录\" name=\"third\">\r\n          <el-table\r\n            tooltip-effect=\"dark\"\r\n            :data=\"tableData2\"\r\n            :header-cell-style=\"{\r\n              background: '#F8F8F9',\r\n              color: '#606266',\r\n              'text-align': 'center',\r\n            }\"\r\n            :cell-style=\"{ 'text-align': 'center' }\"\r\n            id=\"jhmx\"\r\n            height=\"300px\"\r\n          >\r\n            <el-table-column label=\"序号\" type=\"index\" width=\"70\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"审核结果\" width=\"300\">\r\n              <template slot-scope=\"scope\">\r\n                <span\r\n                  v-if=\"scope.row.auditResults == 0\"\r\n                  style=\"font-weight: 600; font-size: 13px\"\r\n                  >提交</span\r\n                >\r\n                <span\r\n                  v-if=\"scope.row.auditResults == 1\"\r\n                  style=\"color: red; font-weight: 600; font-size: 13px\"\r\n                  >驳回</span\r\n                >\r\n                <span\r\n                  v-if=\"scope.row.auditResults == 2\"\r\n                  style=\"color: green; font-weight: 600; font-size: 13px\"\r\n                  >已完成</span\r\n                >\r\n                <span\r\n                  v-if=\"scope.row.auditResults == 3\"\r\n                  style=\"font-weight: 600; font-size: 13px\"\r\n                  >撤销</span\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"opinions\" label=\"审核意见\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"auditUser\" label=\"操作人\" width=\"200\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"操作时间\" width=\"300\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.auditTime != '0001-01-01T00:00:00'\">{{\r\n                  filterTime(scope.row.auditTime)\r\n                }}</span>\r\n                <span v-else></span>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <!-- 分页 -->\r\n          <el-pagination\r\n            id=\"fenye\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage\"\r\n            :page-sizes=\"[4, 8, 12, 16]\"\r\n            :page-size=\"pagesize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"rows\"\r\n          >\r\n          </el-pagination>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"进货记录\" name=\"third1\">\r\n          <el-button id=\"tex9\" icon=\"el-icon-download\" @click=\"exportRow()\"\r\n            >导出</el-button\r\n          >\r\n          <el-table\r\n            tooltip-effect=\"dark\"\r\n            :data=\"tableData3\"\r\n            :header-cell-style=\"{\r\n              background: '#F8F8F9',\r\n              color: '#606266',\r\n\r\n              'text-align': 'center',\r\n            }\"\r\n            :cell-style=\"{ 'text-align': 'center' }\"\r\n            id=\"jhmx\"\r\n            height=\"300px\"\r\n          >\r\n            <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n            <el-table-column label=\"序号\" type=\"index\" width=\"70\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"buy_code\" label=\"进货单号\" width=\"200\">\r\n            </el-table-column>\r\n\r\n            <el-table-column label=\"进货日期\" width=\"300\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.buy_date != '0001-01-01T00:00:00'\">{{\r\n                  filterTime(scope.row.buy_date)\r\n                }}</span>\r\n                <span v-else></span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"supply_code\" label=\"供应商\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"link_man\" label=\"联系人\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"link_way\" label=\"联系方式\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"buy_man\" label=\"进货人\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"buy_man\" label=\"进货人\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"total_buy_num\" label=\"货品数量\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"total_price\" label=\"货品金额\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"create_by\" label=\"制单人\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column label=\"制单时间\" width=\"300\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.create_time != '0001-01-01T00:00:00'\">{{\r\n                  filterTime(scope.row.create_time)\r\n                }}</span>\r\n                <span v-else></span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"sure_man\" label=\"审核人\" width=\"200\">\r\n            </el-table-column>\r\n            <el-table-column label=\"审核时间\" width=\"300\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.sure_date != '0001-01-01T00:00:00'\">{{\r\n                  filterTime(scope.row.sure_date)\r\n                }}</span>\r\n                <span v-else></span>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n\r\n          <!-- 分页 -->\r\n          <!-- <el-pagination id=\"fenye\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                        :current-page=\"currentPage\" :page-sizes=\"[4, 8, 12, 16]\" :page-size=\"pagesize\"\r\n                        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"rows\">\r\n                    </el-pagination> -->\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </div>\r\n    <div id=\"notification-container\">\r\n      <div id=\"dibu\">\r\n        <el-button id=\"bcccc\" @click=\"gb()\">关闭</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $http from \"@/http/base\";\r\nimport axios from \"axios\";\r\nexport function formatDate(date) {\r\n  let time = new Date(date);\r\n\r\n  let year = time.getFullYear();\r\n\r\n  let month = time.getMonth() + 1;\r\n  month = month.toString().padStart(2, \"0\");\r\n  let day = time.getDate().toString().padStart(2, \"0\");\r\n  return year + \"年\" + month + \"月\" + day + \"日\";\r\n}\r\nexport default {\r\n  data() {\r\n    return {\r\n      activeIndex: \"1\",\r\n\r\n      formInline: {\r\n        dh: \"\",\r\n        lx: \"\",\r\n        mc: \"\",\r\n        date: \"\",\r\n        bei: \"\",\r\n        lxr: \"\",\r\n        fs: \"\",\r\n        gldh: \"\",\r\n        gys: \"\",\r\n        sj: \"\",\r\n        zt: \"\",\r\n        rk: \"\",\r\n        ck: \"\",\r\n        cjr: \"\",\r\n        cjsj: \"\",\r\n        gxr: \"\",\r\n        gxsj: \"\",\r\n        px: \"\",\r\n      },\r\n      tableData: [],\r\n      tableData1: [],\r\n      tableData2: [],\r\n      tableData3: [],\r\n      Imager: [],\r\n      ii: \"\",\r\n      currentPage: 1, //当前页\r\n      pagesize: 4, //每页显示数\r\n      rows: 0, //总行数\r\n      str: \"1=1\",\r\n      multipleSelection: [],\r\n      yrksl: 0,\r\n\r\n      zje: 0,\r\n      activeName: \"first\",\r\n    };\r\n  },\r\n  methods: {\r\n    //每页显示数改变事件\r\n    handleSizeChange(size) {\r\n      this.pagesize = size;\r\n      this.currentPage = 1;\r\n      this.FenYe();\r\n    },\r\n    //页码改变事件\r\n    handleCurrentChange(page) {\r\n      this.currentPage = page;\r\n      this.FenYe();\r\n    },\r\n    FenYe() {\r\n      var id = this.$route.query.dh;\r\n      console.log(id);\r\n      $http\r\n        .get(\"http://localhost:5149/api/Bs_item/FindGoodsIfoByItem_Id?id=\" + id)\r\n        .then((res) => {\r\n          this.formInline.lx = res.item_type_name;\r\n          this.formInline.dh = res.item_code;\r\n          this.formInline.ck = res.outbill_price;\r\n          this.formInline.rk = res.inbill_price;\r\n          this.formInline.cjr = res.create_by;\r\n          this.formInline.cjsj = res.create_time;\r\n          this.formInline.gxr = res.update_by;\r\n          this.formInline.gxsj = res.update_time;\r\n          this.formInline.zt = res.inbill_state;\r\n          this.formInline.gys = res.model_code;\r\n          this.formInline.mc = res.unit;\r\n          this.formInline.bei = res.remark;\r\n          // debugger;\r\n          console.log(res);\r\n          //  this.Imager = res.imgUrl;\r\n          var imgUrls = res.imgUrl;\r\n\r\n          if (imgUrls) {\r\n            var imgUrlArray = imgUrls.split(\",\");\r\n            for (let index = 0; index < imgUrlArray.length; index++) {\r\n              const element = imgUrlArray[index];\r\n              this.Imager.push(\"http://localhost:5149/api/images/\" + element);\r\n            }\r\n          } else {\r\n            this.Imager.push(\"http://localhost:5149/api/images/OIP-C.jpg\");\r\n          }\r\n          console.log(this.Imager);\r\n        });\r\n    },\r\n    //关闭\r\n    gb() {\r\n      this.$router.go(-1);\r\n    },\r\n    //导出\r\n    exportRow() {\r\n      //alert(1);\r\n      const apiUrl = \"http://localhost:5149/api/Export\";\r\n      const dummyData = this.tableData3.map((item) => ({\r\n        ...item,\r\n        sure_man: item.sure_man || \"null\",\r\n        update_by: item.update_by || \"null\",\r\n        sure_state: item.sure_state || \"null\",\r\n      }));\r\n      console.log(dummyData);\r\n      $http\r\n        .post(apiUrl, dummyData)\r\n        .then((response) => {\r\n          console.log(response);\r\n          // Handle the response, for example, download the exported file\r\n          this.downloadFile(response, \"exportedData.csv\");\r\n        })\r\n        .catch((error) => {\r\n          alert(\"导出失败\");\r\n          console.error(\"Export failed\", error);\r\n        });\r\n    },\r\n    downloadFile(data, fileName) {\r\n      const blob = new Blob([data], { type: \"application/octet-stream\" });\r\n      const link = document.createElement(\"a\");\r\n      link.href = window.URL.createObjectURL(blob);\r\n      link.download = fileName;\r\n      link.click();\r\n    },\r\n    fzcg() {\r\n      this.$message({\r\n        message: \"复制成功\",\r\n        type: \"success\",\r\n      });\r\n    },\r\n    //下标\r\n    handleSelect(key, keyPath) {\r\n      console.log(key, keyPath);\r\n    },\r\n    //选择\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n      console.log(this.multipleSelection);\r\n    },\r\n    //根据id查进货订单\r\n    Jia() {\r\n      var bh = this.$route.query.dh;\r\n\r\n      // $http\r\n      //     .get(\"  http://localhost:5149/api/Wh_inbill_h/Wh_inbill_hMH?bh=\" + bh)\r\n      //     .then(res => {\r\n\r\n      //         this.formInline.dh = res.inbill_bh;\r\n      //         this.formInline.gldh = res.buy_code;\r\n      //         this.formInline.lx = res.inbill_type;\r\n      //         this.formInline.mc = res.ware_name;\r\n      //         this.formInline.date = res.inbll_date;\r\n      //         this.formInline.bei = res.remark;\r\n      //         this.formInline.lxr = res.link_man;\r\n      //         this.formInline.fs = res.link_way;\r\n      //         this.formInline.gys = res.supply_code;\r\n      //         this.formInline.jbr = res.inbill_duty_man;\r\n      //         this.formInline.sj = res.create_time;\r\n      //         this.formInline.zt = res.inbill_state;\r\n      //         this.ii = res.inbill_id;\r\n\r\n      //     })\r\n      //     .catch(err => {\r\n      //         alert(err);\r\n      //     });\r\n    },\r\n\r\n    //进货明细\r\n    find() {\r\n      var item_code = this.$route.query.item_code;\r\n      $http\r\n        .get(\r\n          \"http://localhost:5149/api/Bs_item/FindPurchaseRecord?item_code=\" +\r\n            item_code\r\n        )\r\n        .then((res) => {\r\n          this.tableData3 = res;\r\n          console.log(res);\r\n        });\r\n      //var bh = this.$route.query.dh\r\n      // $http\r\n      //     .get(\"  http://localhost:5149/api/Wh_inbill_h/Wh_inbill_dMH?bh=\" + bh)\r\n      //     .then(res => {\r\n      //         this.tableData = res;\r\n      //         for (let i = 0; i < this.tableData.length; i++) {\r\n      //             this.yrksl += this.tableData[i].inbill_num;\r\n      //             this.zje +=\r\n      //                 this.tableData[i].zong;\r\n\r\n      //         }\r\n\r\n      //     })\r\n      //     .catch(err => {\r\n      //         alert(err);\r\n      //     });\r\n    },\r\n\r\n    //时间格式化\r\n    filterTime(timestamp) {\r\n      return formatDate(timestamp);\r\n    },\r\n    handleClick(tab, event) {\r\n      console.log(tab, event);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.Jia();\r\n    this.find();\r\n    this.FenYe();\r\n  },\r\n};\r\n</script>\r\n<style src=\"../CSS/public.css\"></style>\r\n<style scoped>\r\n.block {\r\n  height: 260px;\r\n  margin-top: 20px;\r\n  margin-left: 35px;\r\n  width: 302px;\r\n}\r\n.el-carousel__item h3 {\r\n  color: #475669;\r\n  font-size: 14px;\r\n  opacity: 0.75;\r\n  line-height: 150px;\r\n  margin: 0;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n) {\r\n  background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n + 1) {\r\n  background-color: #d3dce6;\r\n}\r\n#hj {\r\n  border: 1px solid #eeeeee;\r\n  width: 1080px;\r\n  height: 45px;\r\n  margin-left: 2px;\r\n  display: inline-block;\r\n}\r\n.red-text {\r\n  color: red;\r\n}\r\n.el-tabs__item {\r\n  padding: 0 20px;\r\n  height: 50px !important;\r\n  box-sizing: border-box;\r\n  line-height: 50px !important;\r\n  display: inline-block;\r\n  list-style: none;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: #303133;\r\n  position: relative;\r\n}\r\n\r\n#menu {\r\n  position: relative;\r\n  left: 30px;\r\n  width: 1085px;\r\n}\r\n\r\n#jhmx {\r\n  width: 1080px !important;\r\n  margin-top: 25px;\r\n  margin-left: 2px;\r\n}\r\n\r\n#notification-container {\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  box-shadow: 0px -1px 7px rgba(0, 0, 0, 0.2);\r\n  background-color: #fff;\r\n  height: 60px;\r\n  z-index: 999;\r\n}\r\n\r\n#bcccc {\r\n  width: 28px !important;\r\n  color: #fff;\r\n  background-color: #9c27b0;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 115px;\r\n}\r\n\r\n#addss {\r\n  border-radius: 5px;\r\n  background-color: #fff;\r\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);\r\n  width: 1150px;\r\n  height: 330px;\r\n}\r\n\r\n#addxxgty {\r\n  margin-top: 20px;\r\n  border-radius: 5px;\r\n  background-color: #fff;\r\n  box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);\r\n  width: 1150px;\r\n  height: 580px;\r\n}\r\n\r\n#tex9 {\r\n  border: 1px solid #fae4a2;\r\n  color: #f8c341;\r\n  background-color: #fef8e8;\r\n  width: 28px !important;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 2px;\r\n  margin-top: 25px;\r\n}\r\n\r\n#tex9:hover {\r\n  background-color: #f5bd41;\r\n  color: #fff;\r\n}\r\n.el-carousel__item h3 {\r\n  color: #475669;\r\n  font-size: 14px;\r\n  opacity: 0.75;\r\n  line-height: 150px;\r\n  margin: 0;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n) {\r\n  background-color: #99a9bf;\r\n}\r\n\r\n.el-carousel__item:nth-child(2n + 1) {\r\n  background-color: #d3dce6;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}