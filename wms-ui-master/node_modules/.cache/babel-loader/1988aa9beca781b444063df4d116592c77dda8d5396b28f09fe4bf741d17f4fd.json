{"ast":null,"code":"var str = \" 1=1 and is_del=0 \";\nimport $http from \"../http/base.js\";\nexport default {\n  data() {\n    return {\n      tableloading: false,\n      //加载\n      showDefaultAttr: true,\n      multipleSelection: [],\n      // 选中的行数据\n      formInline: {\n        bh: '',\n        zt: '',\n        px: \"\",\n        bz: \"\",\n        name: \"\"\n      },\n      formInline1: {\n        fl: '',\n        bh: '',\n        name: '',\n        px: '',\n        bz: '',\n        zt: \"\",\n        item_type_id: 0\n      },\n      formInline2: {\n        lx: '',\n        zt: '',\n        ren: '',\n        startDate: ''\n      },\n      value: [],\n      options: [],\n      tableData: [],\n      cateList: [],\n      formLabelWidth: '100px',\n      drawer: false,\n      drawer1: false,\n      direction: 'rtl',\n      radio: '0',\n      radio1: '0',\n      List: [],\n      bl: '1',\n      direction: 'rtl',\n      currentPage: 1,\n      //当前页\n      pagesize: 3,\n      //每页显示数\n      rows: 0 //总行数\n    };\n  },\n\n  methods: {\n    //查询方法\n    find() {\n      var t = this;\n      // $http.get('http://localhost:5149/api/Bs_itemType/fatherGoodsFind'\n      // ).then(res => {\n      //     console.log(res);\n      //     this.tableData = res.label;\n      // })\n      $http.get(' http://localhost:5149/api/Bs_itemType/FindGoodsType', {\n        params: {\n          currentPage: this.currentPage,\n          pageSize: this.pagesize,\n          str\n        }\n      }).then(res => {\n        console.log(res);\n        this.cateList = res.list;\n        this.rows = res.rows;\n      });\n    },\n    czr() {\n      $http.get('http://localhost:5149/api/Bs_itemType/fatherGoodsFind').then(res => {\n        console.log(res);\n        this.options = res;\n      });\n    },\n    add() {\n      this.drawer = true;\n      $http.get('http://localhost:5149/api/Sys_encode/FindSys_encodeById?id=1').then(res => {\n        this.formInline.bh = res;\n      });\n    },\n    closeDrawer() {\n      var ppid = 0;\n      if (this.value.length > 0) {\n        ppid = parseInt(this.value[this.value.length - 1]);\n      }\n      var name = localStorage.getItem('b');\n      $http.post('http://localhost:5149/api/Bs_itemType/AddGoodsType?father_code=' + ppid + '&item_type_code=' + this.formInline.bh + '&item_type_name=' + this.formInline.name + '&inbill_state=' + this.formInline.zt + '&sort_code=' + this.formInline.px + '&remark=' + this.formInline.bz + '&create_by=' + name + '&is_del=0').then(res => {\n        if (res) {\n          this.$message({\n            message: '新增成功！',\n            type: 'success'\n          });\n          this.drawer = false;\n          this.find();\n        }\n        console.log(res);\n      });\n    },\n    //重置\n    reset() {\n      this.formInline2.lx = \"\";\n      this.formInline2.zt = \"\";\n      this.formInline2.ren = \"\";\n      this.formInline2.startDate = \"\";\n      this.find();\n    },\n    handleEdit(obj) {\n      this.drawer1 = true;\n      console.log(obj);\n      this.formInline1.bh = obj.item_type_code;\n      this.formInline1.name = obj.item_type_name;\n      this.formInline1.zt = obj.inbill_state;\n      this.formInline1.px = obj.sort_code;\n      this.formInline1.bz = obj.remark;\n      this.value = obj.father_code;\n      this.formInline1.item_type_id = obj.item_type_id;\n    },\n    updateok() {\n      var h = 0;\n      if (this.value.length > 0) {\n        h = parseInt(this.value[this.value.length - 1]);\n      } else {\n        h = this.value;\n      }\n      var name = localStorage.getItem('b');\n      $http.put('http://localhost:5149/api/Bs_itemType/UpdateGoodsType?father_code=' + h + '&item_type_code=' + this.formInline1.bh + '&item_type_name=' + this.formInline1.name + '&inbill_state=' + this.formInline1.zt + '&sort_code=' + this.formInline1.px + '&remark=' + this.formInline1.bz + '&update_by=' + name + '&item_type_id=' + this.formInline1.item_type_id + '').then(res => {\n        if (res) {\n          this.$message({\n            message: '修改成功！',\n            type: 'success'\n          });\n          this.drawer1 = false;\n          this.find();\n        }\n      });\n    },\n    // update(obj) {\n    //     this.drawer1 = true;\n    //    console.log(obj);\n    // },\n    //搜索\n    search() {\n      str = \" 1=1  \";\n      if (this.formInline2.lx != \"\") {\n        str += \" AND item_type_code like CONCAT('%','\" + this.formInline2.lx + \"','%') or  item_type_name like CONCAT('%','\" + this.formInline2.lx + \"','%')\";\n      }\n      if (this.formInline2.ren != \"\") {\n        str += \" AND create_by like CONCAT('%','\" + this.formInline2.ren + \"','%')\";\n      }\n      if (this.formInline2.zt != \"\") {\n        str += \" AND inbill_state like CONCAT('%','\" + this.formInline2.zt + \"','%')\";\n      }\n      // if (this.formInline2.startDate != \"\") {\n      //     str += \" AND create_time like CONCAT('%','\" + this.formInline2.startDate + \"','%')\";\n      // }\n      if (this.formInline2.startDate != \"\") {\n        const yearMonthDay = this.formInline2.startDate.substring(0, 10);\n        str += \"and convert(varchar(50),create_time,120) LIKE  '\" + yearMonthDay + \"%'\";\n      }\n      alert(str);\n      this.find();\n    },\n    //选择\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    },\n    //删除\n    handleDelete(i) {\n      this.$confirm('此操作将永久删除该信息, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        console.log(i.item_type_id);\n        console.log(this.bl);\n        $http.post(\"http://localhost:5149/api/Bs_itemType/Bs_ItemTypesDelete?id=\" + i.item_type_id + \"&bl=\" + this.bl).then(res => {\n          if (res) {\n            this.$message({\n              message: '删除成功！',\n              type: 'success'\n            });\n            this.find();\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'error',\n          message: '已取消删除'\n        });\n      });\n    },\n    //每页显示数改变事件\n    handleSizeChange(size) {\n      this.pagesize = size;\n      this.currentPage = 1;\n      this.find();\n    },\n    //页码改变事件\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.find();\n    },\n    //刷新table\n    flushed() {\n      this.tableloading = true;\n      // 模拟获取接口数据\n      setTimeout(() => {\n        //调用find();this.find();\n        this.tableloading = false;\n        this.find();\n      }, 1000);\n      //直接this.查询方法();\n    },\n\n    //批量删除\n    delAll() {\n      this.$confirm('此操作将永久删除该信息, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const length = this.multipleSelection.length;\n        var ss = [];\n        for (let i = 0; i < this.multipleSelection.length; i++) {\n          ss.push(this.multipleSelection[i].item_type_id);\n        }\n        console.log('lo' + length);\n        $http.put('http://localhost:5149/api/Bs_itemType/PLDeleteItemType', ss).then(res => {\n          if (res) {\n            this.$message({\n              message: '删除成功！',\n              type: 'success'\n            });\n            this.find();\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'error',\n          message: '已取消删除'\n        });\n      });\n    },\n    handleClose(done) {\n      this.$confirm('确认关闭？', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    handleChange(value) {\n      console.log(value);\n    },\n    filterTime(timestamp) {\n      return formatDate(timestamp);\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    }\n  },\n  mounted() {\n    this.find();\n    this.czr();\n    this.tableloading = true;\n    // 模拟获取接口数据\n    setTimeout(() => {\n      //调用find();\n      this.find();\n      this.tableloading = false;\n    }, 500);\n  }\n};\nexport function formatDate(date) {\n  let time = new Date(date);\n  let year = time.getFullYear();\n  let month = time.getMonth() + 1;\n  month = month.toString().padStart(2, \"0\");\n  let day = time.getDate().toString().padStart(2, \"0\");\n  return year + '年' + month + '月' + day + '日';\n}","map":{"version":3,"names":["str","$http","data","tableloading","showDefaultAttr","multipleSelection","formInline","bh","zt","px","bz","name","formInline1","fl","item_type_id","formInline2","lx","ren","startDate","value","options","tableData","cateList","formLabelWidth","drawer","drawer1","direction","radio","radio1","List","bl","currentPage","pagesize","rows","methods","find","t","get","params","pageSize","then","res","console","log","list","czr","add","closeDrawer","ppid","length","parseInt","localStorage","getItem","post","$message","message","type","reset","handleEdit","obj","item_type_code","item_type_name","inbill_state","sort_code","remark","father_code","updateok","h","put","search","yearMonthDay","substring","alert","handleSelectionChange","val","handleDelete","i","$confirm","confirmButtonText","cancelButtonText","catch","err","handleSizeChange","size","handleCurrentChange","page","flushed","setTimeout","delAll","ss","push","handleClose","done","_","handleChange","filterTime","timestamp","formatDate","mounted","date","time","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate"],"sources":["src/components/GoodsType.vue"],"sourcesContent":["<template>\n    <div id=\"kj\">\n        <!--头部-->\n        <el-breadcrumb separator=\"/\" id=\"card\">\n            <el-breadcrumb-item :to=\"{ path: '/Home' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item><a href=\"javascript:void(0)\">货品管理</a></el-breadcrumb-item>\n            <el-breadcrumb-item>货品类型</el-breadcrumb-item>\n        </el-breadcrumb>\n        <!--搜索-->\n        <transition-group name=\"lyric\">\n            <div id=\"form\" v-if=\"showDefaultAttr\" key=\"1\">\n                <el-form :inline=\"true\" :model=\"formInline2\" class=\"demo-form-inline\">\n                    <el-form-item label=\"货品类型\" id=\"form_top\">\n                        <el-input v-model=\"formInline2.lx\" id=\"tex\" placeholder=\"请输入货品类型名称/编号\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"状态\" id=\"form_top\">\n                        <el-select v-model=\"formInline2.zt\" id=\"tex\" placeholder=\"请选择\">\n                            <el-option label=\"启用\" value=\"0\"></el-option>\n                            <el-option label=\"停用\" value=\"1\"></el-option>\n                        </el-select>\n                    </el-form-item>\n                    <el-form-item label=\"操作人\" id=\"form_top\" prop=\"ren\">\n                        <!-- <el-select v-model=\"formInline2.ren\" id=\"tex\" placeholder=\"请输入\">\n                            <el-option v-for=\"item in List\" :key=\"item.u_id\" :label=\"item.u_True_name\"\n                                :value=\"item.u_id\"></el-option>\n                        </el-select> -->\n                          <el-input v-model=\"formInline2.ren\" id=\"tex\" placeholder=\"操作人\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"操作时间\" prop=\"startDate\">\n                        <el-date-picker id=\"tex\" v-model=\"formInline2.startDate\" value-format=\"yyyy-MM-dd\" clearable type=\"date\"\n                            placeholder=\"请选择\" />\n                    </el-form-item>\n                    <el-form-item id=\"w\">\n                        <el-button @click=\"search()\" type=\"primary\" id=\"tex1\" icon=\"el-icon-search\">搜索</el-button>\n                        <el-button @click=\"reset()\" id=\"tex2\" icon=\"el-icon-refresh\">重置</el-button>\n                        <!-- <el-button type=\"primary\" @click=\"search\">高级搜索</el-button> -->\n                    </el-form-item>\n                </el-form>\n            </div>\n        </transition-group>\n\n        <!--按钮-->\n        <div id=\"an\">\n            <el-button id=\"tex3\" icon=\"el-icon-plus\" @click=\"add()\">新增</el-button>\n            <!-- <el-button  id=\"tex4\"  icon=\"el-icon-edit\">修改</el-button> -->\n            <el-button id=\"tex5\" @click=\"delAll()\" icon=\"el-icon-delete\"\n                :disabled=\"multipleSelection.length == 0\">删除</el-button>\n            <el-button id=\"tex7\" icon=\"el-icon-upload2\">导入</el-button>\n            <el-button id=\"tex6\" icon=\"el-icon-download\">导出</el-button>\n        </div>\n        <!--隐藏-->\n        <div id=\"an1\">\n            <el-button icon=\"el-icon-search\" circle @click=\"showDefaultAttr = !showDefaultAttr\" title=\"展开\"></el-button>\n            <el-button icon=\"el-icon-refresh\" circle @click=\"flushed\" title=\"刷新\"></el-button>\n        </div>\n        <!-- 表单 -->\n        <el-table tooltip-effect=\"dark\" v-loading=\"tableloading\" @selection-change=\"handleSelectionChange\" :data=\"cateList\"\n            :header-cell-style=\"{ background: '#F8F8F9', color: '#606266' }\" id=\"tableMain\" element-loading-text=\"拼命加载中\"\n            element-loading-spinner=\"el-icon-loading\" height=\"320px\" row-key=\"item_type_id\">\n            <el-table-column type=\"selection\" width=\"55\">\n            </el-table-column>\n            <el-table-column fixed prop=\"item_type_name\" label=\"货品类型名称\" width=\"150\">\n            </el-table-column>\n            <el-table-column prop=\"item_type_id\" label=\"序号\" fixed width=\"120\">\n            </el-table-column>\n            <el-table-column prop=\"item_type_code\" label=\"货品类型编号\" fixed width=\"120\">\n            </el-table-column>\n\n            <el-table-column fixed label=\"状态\" width=\"120\">\n                <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.inbill_state == 0\" style=\"color: blue;font-weight: 600;font-size: 13px;\">正常</span>\n                    <span v-if=\"scope.row.inbill_state == 1\" style=\"color: red;font-weight: 600;font-size: 13px;\">停用</span>\n                </template>\n            </el-table-column>\n\n            <el-table-column prop=\"sort_code\" label=\"排序\" width=\"120\">\n            </el-table-column>\n            <el-table-column prop=\"remark\" label=\"备注\" width=\"180\">\n            </el-table-column>\n\n            <el-table-column prop=\"create_by\" label=\"操作人\" width=\"120\">\n            </el-table-column>\n            <el-table-column label=\"操作时间\" width=\"150\">\n                <template slot-scope='scope'>\n                    <span>{{ filterTime(scope.row.create_time) }}</span>\n                </template>\n            </el-table-column>\n\n            <el-table-column label=\"操作\" fixed=\"right\" width=\"100\">\n                <template slot-scope=\"scope\">\n                    <img src=\"../Images/bianji1.png\" title=\"编辑\" width=\"25px\" height=\"25px\" @click=\"handleEdit(scope.row)\">\n                    <img src=\"../Images/shanchu.png\" width=\"28px\" height=\"28px\" style=\"margin-left: 5px;\" title=\"删除\"\n                        @click=\"handleDelete(scope.row)\">\n                </template>\n            </el-table-column>\n\n        </el-table>\n        <el-pagination id=\"fenye\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n            :current-page=\"currentPage\" :page-sizes=\"[3, 6, 9, 12]\" :page-size=\"pagesize\"\n            layout=\"total, sizes, prev, pager, next, jumper\" :total=\"rows\">\n        </el-pagination>\n        <!-- 新增 -->\n        <el-drawer title=\"新增\" :visible.sync=\"drawer\" :direction=\"direction\" :before-close=\"handleClose\">\n            <div class=\"demo-drawer__content\">\n                <el-form :model=\"formInline\">\n                    <el-form-item label=\"上级分类\" :label-width=\"formLabelWidth\">\n                        <el-cascader :options=\"options\" v-model=\"value\" :props=\"{ checkStrictly: true }\"\n                            @change=\"handleChange\" clearable></el-cascader>\n                    </el-form-item>\n                    <el-form-item label=\"货品类型编号\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline.bh\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"货品类型名称\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline.name\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"排序\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline.px\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"状态\" :label-width=\"formLabelWidth\">\n                        <el-radio v-model=\"formInline.zt\" label=\"0\">启用</el-radio>\n                        <el-radio v-model=\"formInline.zt\" label=\"1\">停用</el-radio>\n                    </el-form-item>\n                    <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline.bz\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                </el-form>\n                <div class=\"demo-drawer__footer\" id=\"didi\">\n                    <el-button id=\"tj\" @click=\"closeDrawer()\">提交</el-button>\n                    <el-button @click=\"drawer = false\" id=\"qx\">取 消</el-button>\n                </div>\n            </div>\n        </el-drawer>\n        <!-- 修改 -->\n\n        <el-drawer title=\"修改\" :visible.sync=\"drawer1\" :direction=\"direction\" :before-close=\"handleClose\">\n            <div class=\"demo-drawer__content\">\n                <el-form :model=\"formInline1\">\n                    <el-form-item label=\"上级分类\" :label-width=\"formLabelWidth\">\n\n                        <el-cascader :options=\"options\" v-model=\"value\" :props=\"{ checkStrictly: true }\"\n                            @change=\"handleChange\" clearable></el-cascader>\n\n                    </el-form-item>\n                    <el-form-item label=\"货品类型编号\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline1.bh\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"货品类型名称\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline1.name\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"排序\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline1.px\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"状态\" :label-width=\"formLabelWidth\">\n                        <el-radio v-model=\"formInline1.zt\" label=\"0\">启用</el-radio>\n                        <el-radio v-model=\"formInline1.zt\" label=\"1\">停用</el-radio>\n                    </el-form-item>\n                    <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\n                        <el-input v-model=\"formInline1.bz\" autocomplete=\"off\"></el-input>\n                    </el-form-item>\n                </el-form>\n                <div class=\"demo-drawer__footer\" id=\"didi\">\n                    <el-button id=\"tj\" @click=\"updateok()\">提交</el-button>\n                    <el-button @click=\"drawer1 = false\" id=\"qx\">取 消</el-button>\n                </div>\n            </div>\n        </el-drawer>\n    </div>\n</template>\n\n<script>\n\nvar str = \" 1=1 and is_del=0 \";\nimport $http from \"../http/base.js\";\nexport default {\n    data() {\n        return {\n            tableloading: false,//加载\n            showDefaultAttr: true,\n            multipleSelection: [],// 选中的行数据\n            formInline: {\n                bh: '',\n                zt: '',\n                px: \"\",\n                bz: \"\",\n                name: \"\",\n            },\n            \n            formInline1: {\n                fl: '',\n                bh: '',\n                name: '',\n                px: '',\n                bz: '',\n                zt: \"\",\n                item_type_id:0,\n                \n            },\n            formInline2: {\n                lx: '',\n                zt: '',\n                ren: '',\n              startDate:''\n            },\n            value: [],\n            options: [],\n            tableData: [],\n            cateList: [],\n            formLabelWidth: '100px',\n            drawer: false,\n            drawer1: false,\n            direction: 'rtl',\n            radio: '0',\n            radio1: '0',\n            List: [],\n            bl: '1',\n            direction: 'rtl',\n            currentPage: 1,//当前页\n            pagesize: 3,//每页显示数\n            rows: 0,//总行数\n        }\n\n    },\n    methods: {\n        //查询方法\n        find() {\n            var t = this;\n            // $http.get('http://localhost:5149/api/Bs_itemType/fatherGoodsFind'\n            // ).then(res => {\n            //     console.log(res);\n            //     this.tableData = res.label;\n            // })\n            $http.get(' http://localhost:5149/api/Bs_itemType/FindGoodsType', {\n                params: {\n                    currentPage: this.currentPage,\n                    pageSize: this.pagesize,\n                    str\n                }\n            }\n            ).then(res => {\n                console.log(res);\n                this.cateList = res.list;\n                this.rows = res.rows;\n            })\n        },\n        czr() {\n            $http.get('http://localhost:5149/api/Bs_itemType/fatherGoodsFind'\n            ).then(res => {\n                console.log(res);\n                this.options = res;\n            })\n        },\n        add() {\n            this.drawer = true;\n            $http.get('http://localhost:5149/api/Sys_encode/FindSys_encodeById?id=1').then(res => {\n                this.formInline.bh = res;\n            })\n\n        }, closeDrawer() {\n            var ppid = 0;\n            if (this.value.length > 0) {\n                ppid = parseInt(this.value[this.value.length - 1]);\n            }\n            var name = localStorage.getItem('b');\n            $http.post('http://localhost:5149/api/Bs_itemType/AddGoodsType?father_code='\n                + ppid + '&item_type_code=' + this.formInline.bh + '&item_type_name='\n                + this.formInline.name + '&inbill_state=' + this.formInline.zt + '&sort_code=' + this.formInline.px + '&remark=' + this.formInline.bz + '&create_by=' + name + '&is_del=0')\n                .then(res => {\n                    if (res) {\n                        this.$message({\n                            message: '新增成功！',\n                            type: 'success'\n                        });\n                        this.drawer = false;\n                        this.find();\n                    }\n                    console.log(res);\n                })\n        },\n        //重置\n        reset() {\n            this.formInline2.lx = \"\";\n            this.formInline2.zt = \"\";\n            this.formInline2.ren = \"\";\n            this.formInline2.startDate = \"\";\n            this.find();\n        },\n        handleEdit(obj) {\n\n\n            this.drawer1 = true;\n            console.log(obj);\n            this.formInline1.bh = obj.item_type_code;\n            this.formInline1.name = obj.item_type_name;\n            this.formInline1.zt = obj.inbill_state;\n            this.formInline1.px = obj.sort_code;\n            this.formInline1.bz = obj.remark;\n            this.value = obj.father_code;\n            this.formInline1.item_type_id = obj.item_type_id;\n\n        },\n        updateok() {\n           \n              var h = 0;\n            if (this.value.length > 0) {\n                h = parseInt(this.value[this.value.length - 1]);\n            } else {\n                h = this.value;\n            }\n            var name = localStorage.getItem('b');\n            $http.put('http://localhost:5149/api/Bs_itemType/UpdateGoodsType?father_code='+ h + '&item_type_code=' + this.formInline1.bh + '&item_type_name=' + this.formInline1.name + '&inbill_state=' + this.formInline1.zt + '&sort_code=' + this.formInline1.px + '&remark='\n                + this.formInline1.bz + '&update_by=' + name + '&item_type_id=' + this.formInline1.item_type_id + '')\n                .then(res => {\n                    if (res) {\n                        this.$message({\n                            message: '修改成功！',\n                            type: 'success'\n                        });\n                        this.drawer1 = false;\n                        this.find();\n                    }\n                })\n        },\n        // update(obj) {\n        //     this.drawer1 = true;\n        //    console.log(obj);\n        // },\n        //搜索\n        search() {\n            str = \" 1=1  \"; \n            if (this.formInline2.lx != \"\") {\n                str += \" AND item_type_code like CONCAT('%','\" + this.formInline2.lx + \"','%') or  item_type_name like CONCAT('%','\" + this.formInline2.lx + \"','%')\";\n            }\n            if (this.formInline2.ren != \"\") {\n                str += \" AND create_by like CONCAT('%','\" + this.formInline2.ren + \"','%')\";\n            }\n            if (this.formInline2.zt != \"\") {\n                str += \" AND inbill_state like CONCAT('%','\" + this.formInline2.zt + \"','%')\";\n            }\n            // if (this.formInline2.startDate != \"\") {\n            //     str += \" AND create_time like CONCAT('%','\" + this.formInline2.startDate + \"','%')\";\n            // }\n              if (this.formInline2.startDate != \"\") {\n                const yearMonthDay = this.formInline2.startDate.substring(0, 10);\n                str +=\"and convert(varchar(50),create_time,120) LIKE  '\" + yearMonthDay + \"%'\";\n            }\n\n\n            alert(str);\n            this.find();\n        },\n        //选择\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n            console.log(this.multipleSelection);\n        },\n        //删除\n        handleDelete(i) {\n            this.$confirm('此操作将永久删除该信息, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                console.log(i.item_type_id);\n                console.log(this.bl)\n                $http\n                    .post(\"http://localhost:5149/api/Bs_itemType/Bs_ItemTypesDelete?id=\" + i.item_type_id + \"&bl=\" + this.bl)\n                    .then(res => {\n\n                        if (res) {\n                            this.$message({\n                                message: '删除成功！',\n                                type: 'success'\n                            });\n                            this.find();\n                        }\n                    })\n                    .catch(err => {\n                        console.log(err);\n                    });\n            }).catch(() => {\n                this.$message({\n                    type: 'error',\n                    message: '已取消删除'\n                });\n            });\n        },\n        //每页显示数改变事件\n        handleSizeChange(size) {\n            this.pagesize = size;\n            this.currentPage = 1;\n            this.find();\n        },\n        //页码改变事件\n        handleCurrentChange(page) {\n            this.currentPage = page;\n            this.find();\n        },\n        //刷新table\n        flushed() {\n            this.tableloading = true\n            // 模拟获取接口数据\n            setTimeout(() => {\n                //调用find();this.find();\n                this.tableloading = false;\n                this.find();\n            }, 1000)\n            //直接this.查询方法();\n        },\n        //批量删除\n        delAll() {\n            this.$confirm('此操作将永久删除该信息, 是否继续?', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            }).then(() => {\n                const length = this.multipleSelection.length;\n                var ss = [];\n                for (let i = 0; i < this.multipleSelection.length; i++) {\n                    ss.push(this.multipleSelection[i].item_type_id);\n                }\n                console.log('lo' + length)\n                $http\n                    .put('http://localhost:5149/api/Bs_itemType/PLDeleteItemType', ss)\n                    .then(res => {\n\n                        if (res) {\n                            this.$message({\n                                message: '删除成功！',\n                                type: 'success'\n                            });\n                            this.find();\n                        }\n                    })\n                    .catch(err => {\n                        console.log(err);\n                    });\n            }).catch(() => {\n                this.$message({\n                    type: 'error',\n                    message: '已取消删除'\n                });\n            });\n        },\n        handleClose(done) {\n            this.$confirm('确认关闭？', '提示', {\n                confirmButtonText: '确定',\n                cancelButtonText: '取消',\n                type: 'warning'\n            })\n                .then(_ => {\n                    done();\n                })\n                .catch(_ => { });\n        }, handleChange(value) {\n            console.log(value);\n        },\n        filterTime(timestamp) {\n            return formatDate(timestamp)\n        },\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n            console.log(this.multipleSelection);\n        },\n    },\n    mounted() {\n        this.find();\n        this.czr();\n        this.tableloading = true\n        // 模拟获取接口数据\n        setTimeout(() => {\n            //调用find();\n            this.find();\n            this.tableloading = false\n        }, 500)\n    }\n};\nexport function formatDate(date) {\n    let time = new Date(date);\n\n    let year = time.getFullYear();\n\n    let month = time.getMonth() + 1;\n    month = month.toString().padStart(2, \"0\");\n    let day = time.getDate().toString().padStart(2, \"0\")\n    return year + '年' + month + '月' + day + '日'\n}\n</script>\n<style scoped src=\"../CSS/public.css\"></style>\n\n<style>\n#w {\n    margin-left: 20px;\n}\n\n#card {\n    height: 35px;\n    line-height: 35px;\n    margin-left: 20px;\n}\n\n#form {\n    margin-top: 15px;\n    width: 1020px;\n    box-shadow: 0px 1px 0px rgba(0, 0, 0, 0.2);\n    margin-left: 65px;\n}\n\n#form_top {\n    margin-right: 25px !important;\n    margin-bottom: 12px;\n}\n\n.el-col-2 {\n    width: 30px;\n    text-align: center;\n}\n\n.el-form--inline .el-form-item__label {\n    float: none;\n    display: inline-block;\n    font-weight: bold;\n    font-size: 13px;\n}\n\n#tex {\n    width: 240px;\n    height: 32px;\n}\n\n#tex1 {\n    width: 28px !important;\n    color: #FFF;\n    background-color: #409EFF;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n    margin-left: 20px;\n}\n\n#tex2 {\n    width: 28px !important;\n    color: #000;\n    background-color: #fff;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n}\n\n#tex3 {\n    border: 1px solid #ADD2FB;\n    color: #448EF8;\n    background-color: #EAF4FE;\n    width: 28px !important;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n    margin-left: 20px;\n}\n\n#tex4 {\n    border: 1px solid #D7F4E1;\n    color: #8EDFA8;\n    background-color: #EBF9F1;\n    width: 28px !important;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n    margin-left: 20px;\n}\n\n#tex5 {\n    border: 1px solid #F9DCDC;\n    color: #F29895;\n    background-color: #FCEEED;\n    width: 28px !important;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n    margin-left: 20px;\n}\n\n#tex6 {\n    border: 1px solid #FAE4A2;\n    color: #F8C341;\n    background-color: #FEF8E8;\n    width: 28px !important;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n    margin-left: 20px;\n}\n\n#tex7 {\n    border: 1px solid #D3D4D6;\n    color: #919398;\n    background-color: #F4F4F5;\n    width: 28px !important;\n    line-height: 28px !important;\n    width: 73px !important;\n    padding: 0px !important;\n    margin-left: 20px;\n}\n\n#tex3:hover {\n    background-color: #409EFF;\n    color: #fff;\n}\n\n#tex4:hover {\n    background-color: #5FCB71;\n    color: #fff;\n}\n\n#tex5:hover {\n    background-color: #ff4949;\n    color: #fff;\n}\n\n#tex6:hover {\n    background-color: #F5BD41;\n    color: #fff;\n}\n\n#tex7:hover {\n    background-color: #919398;\n    color: #fff;\n}\n\n#an1 {\n    float: right;\n    position: relative;\n    top: 9px;\n    right: 64px;\n}\n\n.lyric-enter,\n.lyric-leave-to {\n    opacity: 0;\n    transform: translateY(15px);\n}\n\n.lyric-enter-to,\n.lyric-leave {\n    opacity: 1;\n}\n\n.lyric-enter-active,\n.lyric-leave-active {\n    transition: all 0.4s ease-out;\n}\n\n.el-drawer__header {\n    align-items: center;\n    color: #000 !important;\n    display: flex;\n    font-weight: bold;\n    margin-bottom: 32px;\n    padding: 10px 20px 0 !important;\n    box-shadow: 0px -1px 7px rgba(0, 0, 0, 0.2);\n    background-color: #fff;\n    height: 50px;\n}\n\n#didi {\n    position: absolute;\n    bottom: -0px;\n    box-shadow: 0px -1px 7px rgba(0, 0, 0, 0.2);\n    background-color: #fff;\n    width: 430px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n}\n\n#qx {\n    width: 150px;\n    height: 35px;\n    line-height: 35px;\n    padding: 0px !important;\n    background-color: #fff;\n    color: #000;\n    margin-left: 30px;\n}\n\n#tj {\n    width: 150px;\n    height: 35px;\n    line-height: 35px;\n    padding: 0px !important;\n    background-color: #9C27B0;\n    color: #fff;\n    margin-left: 50px;\n}\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}