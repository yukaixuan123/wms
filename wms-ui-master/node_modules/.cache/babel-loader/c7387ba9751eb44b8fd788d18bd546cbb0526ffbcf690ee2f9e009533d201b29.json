{"ast":null,"code":"import $http from \"../http/base.js\";\nimport { Alert, Switch } from \"element-ui\";\nimport axios from \"axios\";\n//日期格式转换\nexport function formatDate(date) {\n  let time = new Date(date);\n  let year = time.getFullYear();\n  let month = time.getMonth() + 1;\n  month = month.toString().padStart(2, \"0\");\n  let day = time.getDate().toString().padStart(2, \"0\");\n  return year + \"年\" + month + \"月\" + day + \"日\";\n}\nvar qz = \"\";\nexport default {\n  data() {\n    return {\n      labelPosition: \"right\",\n      formLabelAlign: {\n        name: \"\",\n        region: \"\",\n        type: \"\"\n      },\n      list: [],\n      checkList: [],\n      update: {\n        en_form: \"\"\n      },\n      labelPosition: \"right\",\n      formLabelWidth: \"80px\",\n      direction: \"rtl\",\n      tableloading: false,\n      //加载\n      showDefaultAttr: true,\n      multipleSelection: [],\n      // 选中的行数据\n      tableData: [],\n      formInline: {\n        user: \"\",\n        gz: \"\",\n        data1: \"\",\n        region: \"\"\n      },\n      yulan: \"\",\n      formInline1: {\n        en_step: \"\",\n        en_prefix: \"\",\n        en_rules: \"\",\n        en_time: \"\",\n        en_code: 0,\n        en_num: \"\",\n        en_form: \"\"\n      },\n      dialogVisible: false,\n      qz,\n      currentPage: 1,\n      //当前页\n      pagesize: 3,\n      //每页显示数\n      rows: 0,\n      //总行数\n      rules: {\n        en_form: [{\n          required: true,\n          message: \"请填写完整信息\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    //查询方法\n    find() {\n      $http.get(\"http://localhost:5149/api/Sys_encode/Sys_encodeFenYe\", {\n        params: {\n          page: this.currentPage,\n          pageSize: this.pagesize,\n          qz: this.formInline.user,\n          from: this.formInline.region,\n          gz: this.formInline.gz,\n          time: this.formInline.data1\n        }\n      }).then(res => {\n        this.list = res.data;\n        this.tableData = res.data;\n        this.rows = res.totalCount;\n        console.log(res);\n      });\n    },\n    //提交\n    closeDrawer() {\n      var h = localStorage.getItem(\"b\");\n      console.log(h);\n      $http.put(\"http://localhost:5149/api/Sys_encode/Sys_encodeUpdate?en_code=\" + this.formInline1.en_code + \"&en_prefix=\" + this.formInline1.en_prefix + \"&en_time=\" + this.formInline1.en_time + \"&en_num=\" + this.formInline1.en_num + \"&en_step=\" + this.formInline1.en_step + \"&en_rules=\" + this.formInline1.en_rules + \"&create_by=\" + h + \"\").then(res => {\n        if (res) {\n          this.$message({\n            type: \"success\",\n            message: \"修改成功!\"\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    },\n    //重置\n    reset() {\n      this.formInline = {\n        user: \"\",\n        region: \"\",\n        gz: \"\",\n        date1: \"\"\n      };\n      this.find();\n    },\n    //搜索\n    search() {\n      this.find();\n    },\n    //选择\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection);\n    },\n    //打开模态框\n    handleEdit(obj) {\n      this.dialogVisible = true;\n      this.formInline1.en_form = obj.en_form;\n      this.formInline1.en_prefix = obj.en_prefix;\n      this.formInline1.en_num = obj.en_num;\n      this.formInline1.en_step = obj.en_step;\n      this.formInline1.en_rules = obj.en_rules;\n      this.formInline1.en_time = obj.en_time;\n      this.formInline1.en_code = obj.en_code;\n      console.log(obj.en_time);\n      var enTime = obj.en_time;\n      //多选框显示\n      for (var a in enTime) {\n        switch (enTime[a]) {\n          case \"年\":\n            this.checkList.push(\"YYYY\");\n            break;\n          case \"月\":\n            this.checkList.push(\"MM\");\n            break;\n          case \"日\":\n            this.checkList.push(\"DD\");\n            break;\n          case \"时\":\n            this.checkList.push(\"HH\");\n            break;\n          case \"分\":\n            this.checkList.push(\"F\");\n            break;\n          case \"秒\":\n            this.checkList.push(\"SS\");\n            break;\n        }\n        console.log(this.checkList);\n      }\n    },\n    //删除\n    handleDelete() {\n      this.$confirm(\"此操作将永久删除该信息, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        this.$message({\n          type: \"success\",\n          message: \"删除成功!\"\n        });\n      }).catch(() => {\n        this.$message({\n          type: \"error\",\n          message: \"已取消删除\"\n        });\n      });\n    },\n    //每页显示数改变事件\n    handleSizeChange(size) {\n      this.pagesize = size;\n      this.currentPage = 1;\n      this.find();\n    },\n    //页码改变事件\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.find();\n    },\n    change(checkList) {\n      // console.log(checkList);\n      //  console.log(123);\n      //#region  编码生成规则\n      var sun = \"\";\n      var sun2 = \"\";\n      for (var s in checkList) {\n        console.log(checkList[s]);\n        switch (checkList[s]) {\n          case \"YYYY\":\n            sun += \"年\";\n            sun2 += \"YYYY\";\n            break;\n          case \"MM\":\n            sun += \"月\";\n            sun2 += \"MM\";\n            break;\n          case \"DD\":\n            sun += \"日\";\n            sun2 += \"DD\";\n            break;\n          case \"HH\":\n            sun += \"时\";\n            sun2 += \"HH\";\n            break;\n          case \"F\":\n            sun += \"分\";\n            sun2 += \"MM\";\n            break;\n          case \"SS\":\n            sun += \"秒\";\n            sun2 += \"SS\";\n            break;\n        }\n      }\n      console.log(sun + \"\" + sun2);\n      this.formInline1.en_time = sun;\n      this.formInline1.en_rules = \"\";\n      this.formInline1.en_rules += this.formInline1.en_prefix;\n      //     console.log(this.formInline.en_rules);\n      this.formInline1.en_rules += sun2;\n      //   console.log(this.formInline.en_rules);\n      var su = 0;\n      su = this.formInline1.en_num;\n      for (var i = 1; i < su; i++) {\n        this.formInline1.en_rules += \"0\";\n      }\n      this.formInline1.en_rules += \"1\";\n      //  console.log(this.formInline.en_rules);\n      //  console.log(this.formInline.en_num);\n      //#endregion\n      //#region   预览\n      var today = new Date(); //获取当前时间\n      var year = today.getFullYear(); //获取年份\n      var month = today.getMonth() + 1; //获取月份\n      var day = today.getDate(); //获取日期\n      var hours = today.getHours(); //获取时\n      var minutes = today.getMinutes(); //获得分钟\n      var Seconds = today.getSeconds(); //获得秒\n      if (Seconds <= 9) {\n        Seconds = \"0\" + Seconds;\n      }\n      //console.log(\"年\"+year + \"月\" + month + \"日\" + day+\"时\"+hours+\"分\"+minutes+\"秒\"+Seconds);\n      this.yulan = this.formInline1.en_prefix;\n      var chaifen = sun.split(\"\");\n      for (var s in chaifen) {\n        switch (chaifen[s]) {\n          case \"年\":\n            this.yulan += year;\n            break;\n          case \"月\":\n            this.yulan += month;\n            break;\n          case \"日\":\n            this.yulan += day;\n            break;\n          case \"时\":\n            this.yulan += hours;\n            break;\n          case \"分\":\n            this.yulan += minutes;\n            break;\n          case \"秒\":\n            this.yulan += Seconds;\n            break;\n        }\n        console.log(this.checkList);\n      }\n      var b = 0; //获取流水号  如:01  001\n      b = this.formInline1.en_num;\n      for (var b = 1; b < su; b++) {\n        this.yulan += \"0\";\n        console.log(\"进来了\" + b);\n      }\n      this.yulan += \"1\";\n      //#endregion\n    },\n\n    //刷新table\n    flushed() {\n      this.tableloading = true;\n      // 模拟获取接口数据\n      setTimeout(() => {\n        //调用find();\n        this.find();\n        this.tableloading = false;\n      }, 1000);\n      //直接this.查询方法();\n    },\n\n    //批量删除\n    delAll() {\n      alert(\"123\");\n      //   const length = this.multipleSelection.length;\n      //   for (let i = 0; i < length; i++) {\n      //     this.delarr.push(this.multipleSelection[i].PackingId)\n      //   }\n    },\n\n    filterTime(timestamp) {\n      return formatDate(timestamp);\n    },\n    handleClose(done) {\n      this.$confirm(\"确认关闭？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(_ => {\n        done();\n      }).catch(_ => {});\n    },\n    cancelForm() {\n      this.dialogVisible = false;\n      this.checkList = [];\n    }\n  },\n  mounted() {\n    this.find();\n  }\n};","map":{"version":3,"names":["$http","Alert","Switch","axios","formatDate","date","time","Date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","qz","data","labelPosition","formLabelAlign","name","region","type","list","checkList","update","en_form","formLabelWidth","direction","tableloading","showDefaultAttr","multipleSelection","tableData","formInline","user","gz","data1","yulan","formInline1","en_step","en_prefix","en_rules","en_time","en_code","en_num","dialogVisible","currentPage","pagesize","rows","rules","required","message","trigger","methods","find","get","params","page","pageSize","from","then","res","totalCount","console","log","closeDrawer","h","localStorage","getItem","put","$message","catch","err","reset","date1","search","handleSelectionChange","val","handleEdit","obj","enTime","a","push","handleDelete","$confirm","confirmButtonText","cancelButtonText","handleSizeChange","size","handleCurrentChange","change","sun","sun2","s","su","i","today","hours","getHours","minutes","getMinutes","Seconds","getSeconds","chaifen","split","b","flushed","setTimeout","delAll","alert","filterTime","timestamp","handleClose","done","_","cancelForm","mounted"],"sources":["src/components/CodingRule.vue"],"sourcesContent":["<template>\r\n  <div id=\"kj\">\r\n    <!--头部-->\r\n    <el-breadcrumb separator=\"/\" id=\"card\">\r\n      <el-breadcrumb-item :to=\"{ path: '/Home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item\r\n        ><a href=\"javascript:void(0)\">系统设置</a></el-breadcrumb-item\r\n      >\r\n      <el-breadcrumb-item>编码规则</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!--搜索-->\r\n\r\n    <transition-group name=\"lyric\">\r\n      <div id=\"form\" v-if=\"showDefaultAttr\" key=\"1\">\r\n        <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\r\n          <el-form-item label=\"目标表单\" id=\"form_top\">\r\n            <el-select\r\n              v-model=\"formInline.region\"\r\n              id=\"tex\"\r\n              placeholder=\"活动区域\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in list\"\r\n                :key=\"item.en_code\"\r\n                :value=\"item.en_form\"\r\n              >\r\n              </el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"编号前缀\" id=\"form_top\">\r\n            <el-input\r\n              v-model=\"formInline.user\"\r\n              id=\"tex\"\r\n              placeholder=\"请输入编号\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"时间规则\" id=\"form_top\">\r\n            <el-input\r\n              v-model=\"formInline.gz\"\r\n              id=\"tex\"\r\n              placeholder=\"请输入\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"进货日期\" prop=\"startDate\">\r\n            <el-date-picker\r\n              v-model=\"formInline.data1\"\r\n              type=\"datetime\"\r\n              placeholder=\"选择日期时间\"\r\n              value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n            >\r\n            </el-date-picker>\r\n          </el-form-item>\r\n\r\n          <el-form-item id=\"w\">\r\n            <el-button\r\n              @click=\"search()\"\r\n              type=\"primary\"\r\n              id=\"tex1\"\r\n              icon=\"el-icon-search\"\r\n              >搜索</el-button\r\n            >\r\n            <el-button\r\n              @click=\"reset('formInline')\"\r\n              id=\"tex2\"\r\n              icon=\"el-icon-refresh\"\r\n              >重置</el-button\r\n            >\r\n            <!-- <el-button type=\"primary\" @click=\"search\">高级搜索</el-button> -->\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </transition-group>\r\n\r\n    <!--按钮-->\r\n    <div id=\"an\">\r\n      <el-button id=\"tex7\" icon=\"el-icon-upload2\">导入</el-button>\r\n      <el-button id=\"tex6\" icon=\"el-icon-download\">导出</el-button>\r\n    </div>\r\n    <!--隐藏-->\r\n    <div id=\"an1\">\r\n      <el-button\r\n        icon=\"el-icon-search\"\r\n        circle\r\n        @click=\"showDefaultAttr = !showDefaultAttr\"\r\n        title=\"展开\"\r\n      ></el-button>\r\n      <el-button\r\n        icon=\"el-icon-refresh\"\r\n        circle\r\n        @click=\"flushed\"\r\n        title=\"刷新\"\r\n      ></el-button>\r\n    </div>\r\n    <!-- 表单 -->\r\n    <el-table\r\n      tooltip-effect=\"dark\"\r\n      v-loading=\"tableloading\"\r\n      @selection-change=\"handleSelectionChange\"\r\n      :data=\"tableData\"\r\n      :header-cell-style=\"{ background: '#F8F8F9', color: '#606266' }\"\r\n      id=\"tableMain\"\r\n    >\r\n      <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n      <el-table-column fixed prop=\"en_code\" label=\"序号\" width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        fixed\r\n        prop=\"en_form\"\r\n        label=\"目标表单\"\r\n        width=\"120\"\r\n        disabled\r\n      >\r\n      </el-table-column>\r\n      <el-table-column fixed prop=\"en_prefix\" label=\"编号前缀\" width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"en_time\" label=\"时间规则\" width=\"120\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"en_num\" label=\"流水号\" width=\"130\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"en_step\" label=\"步长\" width=\"130\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"en_rules\" label=\"编号生成规则\" width=\"250\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"create_by\" label=\"操作人\" width=\"130\">\r\n      </el-table-column>\r\n      <el-table-column fixed label=\"操作时间\" width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ filterTime(scope.row.create_time) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" fixed=\"right\" width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"el-button el-button--text el-button--mini\"\r\n            @click=\"handleEdit(scope.row)\"\r\n          >\r\n            <!----><i class=\"el-icon-edit\"></i><span>修改</span>\r\n          </button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n      id=\"fenye\"\r\n      @size-change=\"handleSizeChange\"\r\n      @current-change=\"handleCurrentChange\"\r\n      :current-page=\"currentPage\"\r\n      :page-sizes=\"[3, 6, 9, 12]\"\r\n      :page-size=\"pagesize\"\r\n      layout=\"total, sizes, prev, pager, next, jumper\"\r\n      :total=\"rows\"\r\n    >\r\n    </el-pagination>\r\n\r\n    <!---分配人模态框-->\r\n    <el-drawer\r\n      title=\"编辑\"\r\n      :visible.sync=\"dialogVisible\"\r\n      :direction=\"direction\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <div class=\"demo-drawer__content\">\r\n        <el-form :model=\"formInline1\" label-position=\"top\">\r\n          <el-form-item label=\"目标表单\" :label-width=\"formLabelWidth\">\r\n            <el-input\r\n              v-model=\"formInline1.en_form\"\r\n              disabled\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"编号前缀\" :label-width=\"formLabelWidth\">\r\n            <el-input\r\n              v-model=\"formInline1.en_prefix\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"时间规则\" :label-width=\"formLabelWidth\">\r\n            <el-checkbox-group\r\n              title=\"时间规则\"\r\n              v-model=\"checkList\"\r\n              @change=\"change\"\r\n            >\r\n              <el-checkbox label=\"YYYY\">年YYYY</el-checkbox>\r\n              <el-checkbox label=\"MM\">月MM</el-checkbox>\r\n              <el-checkbox label=\"DD\">日DD</el-checkbox>\r\n              <el-checkbox label=\"HH\">时HH</el-checkbox>\r\n              <el-checkbox label=\"F\">分MM</el-checkbox>\r\n              <el-checkbox label=\"SS\">秒SS</el-checkbox>\r\n            </el-checkbox-group>\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"流水号\" :label-width=\"formLabelWidth\">\r\n            <el-input\r\n              v-model=\"formInline1.en_num\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"步长\" :label-width=\"formLabelWidth\">\r\n            <el-input\r\n              v-model=\"formInline1.en_step\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"编号生成规则\" :label-width=\"formLabelWidth\">\r\n            <el-input\r\n              v-model=\"formInline1.en_rules\"\r\n              autocomplete=\"off\"\r\n            ></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"编号预览\" :label-width=\"formLabelWidth\">\r\n            <el-input v-model=\"yulan\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n\r\n        <div class=\"demo-drawer__footer\" id=\"didi\">\r\n          <el-button id=\"tj\" @click=\"closeDrawer()\">提交</el-button>\r\n          <el-button @click=\"cancelForm\" id=\"qx\">取 消</el-button>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport $http from \"../http/base.js\";\r\nimport { Alert, Switch } from \"element-ui\";\r\nimport axios from \"axios\";\r\n//日期格式转换\r\nexport function formatDate(date) {\r\n  let time = new Date(date);\r\n\r\n  let year = time.getFullYear();\r\n\r\n  let month = time.getMonth() + 1;\r\n  month = month.toString().padStart(2, \"0\");\r\n  let day = time.getDate().toString().padStart(2, \"0\");\r\n  return year + \"年\" + month + \"月\" + day + \"日\";\r\n}\r\n\r\nvar qz = \"\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      labelPosition: \"right\",\r\n      formLabelAlign: {\r\n        name: \"\",\r\n        region: \"\",\r\n        type: \"\",\r\n      },\r\n      list: [],\r\n      checkList: [],\r\n      update: {\r\n        en_form: \"\",\r\n      },\r\n      labelPosition: \"right\",\r\n      formLabelWidth: \"80px\",\r\n\r\n      direction: \"rtl\",\r\n      tableloading: false, //加载\r\n      showDefaultAttr: true,\r\n      multipleSelection: [], // 选中的行数据\r\n      tableData: [],\r\n      formInline: {\r\n        user: \"\",\r\n        gz: \"\",\r\n        data1: \"\",\r\n        region: \"\",\r\n      },\r\n      yulan: \"\",\r\n      formInline1: {\r\n        en_step: \"\",\r\n        en_prefix: \"\",\r\n        en_rules: \"\",\r\n        en_time: \"\",\r\n        en_code: 0,\r\n        en_num: \"\",\r\n        en_form: \"\",\r\n      },\r\n      dialogVisible: false,\r\n      qz,\r\n      currentPage: 1, //当前页\r\n      pagesize: 3, //每页显示数\r\n      rows: 0, //总行数\r\n      rules: {\r\n        en_form: [\r\n          { required: true, message: \"请填写完整信息\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    //查询方法\r\n    find() {\r\n      $http\r\n        .get(\"http://localhost:5149/api/Sys_encode/Sys_encodeFenYe\", {\r\n          params: {\r\n            page: this.currentPage,\r\n            pageSize: this.pagesize,\r\n            qz: this.formInline.user,\r\n            from: this.formInline.region,\r\n            gz: this.formInline.gz,\r\n            time: this.formInline.data1,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.list = res.data;\r\n          this.tableData = res.data;\r\n          this.rows = res.totalCount;\r\n          console.log(res);\r\n        });\r\n    },\r\n\r\n    //提交\r\n    closeDrawer() {\r\n      var h = localStorage.getItem(\"b\");\r\n      console.log(h);\r\n      $http\r\n        .put(\r\n          \"http://localhost:5149/api/Sys_encode/Sys_encodeUpdate?en_code=\" +\r\n            this.formInline1.en_code +\r\n            \"&en_prefix=\" +\r\n            this.formInline1.en_prefix +\r\n            \"&en_time=\" +\r\n            this.formInline1.en_time +\r\n            \"&en_num=\" +\r\n            this.formInline1.en_num +\r\n            \"&en_step=\" +\r\n            this.formInline1.en_step +\r\n            \"&en_rules=\" +\r\n            this.formInline1.en_rules +\r\n            \"&create_by=\" +\r\n            h +\r\n            \"\"\r\n        )\r\n        .then((res) => {\r\n          if (res) {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"修改成功!\",\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    //重置\r\n    reset() {\r\n      this.formInline = {\r\n        user: \"\",\r\n        region: \"\",\r\n        gz: \"\",\r\n        date1: \"\",\r\n      };\r\n      this.find();\r\n    },\r\n    //搜索\r\n    search() {\r\n      this.find();\r\n    },\r\n    //选择\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val;\r\n      console.log(this.multipleSelection);\r\n    },\r\n    //打开模态框\r\n    handleEdit(obj) {\r\n      this.dialogVisible = true;\r\n      this.formInline1.en_form = obj.en_form;\r\n      this.formInline1.en_prefix = obj.en_prefix;\r\n      this.formInline1.en_num = obj.en_num;\r\n      this.formInline1.en_step = obj.en_step;\r\n      this.formInline1.en_rules = obj.en_rules;\r\n      this.formInline1.en_time = obj.en_time;\r\n      this.formInline1.en_code = obj.en_code;\r\n      console.log(obj.en_time);\r\n      var enTime = obj.en_time;\r\n      //多选框显示\r\n      for (var a in enTime) {\r\n        switch (enTime[a]) {\r\n          case \"年\":\r\n            this.checkList.push(\"YYYY\");\r\n            break;\r\n          case \"月\":\r\n            this.checkList.push(\"MM\");\r\n            break;\r\n          case \"日\":\r\n            this.checkList.push(\"DD\");\r\n            break;\r\n          case \"时\":\r\n            this.checkList.push(\"HH\");\r\n            break;\r\n          case \"分\":\r\n            this.checkList.push(\"F\");\r\n            break;\r\n          case \"秒\":\r\n            this.checkList.push(\"SS\");\r\n            break;\r\n        }\r\n        console.log(this.checkList);\r\n      }\r\n    },\r\n    //删除\r\n    handleDelete() {\r\n      this.$confirm(\"此操作将永久删除该信息, 是否继续?\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then(() => {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除成功!\",\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: \"已取消删除\",\r\n          });\r\n        });\r\n    },\r\n    //每页显示数改变事件\r\n    handleSizeChange(size) {\r\n      this.pagesize = size;\r\n      this.currentPage = 1;\r\n      this.find();\r\n    },\r\n    //页码改变事件\r\n    handleCurrentChange(page) {\r\n      this.currentPage = page;\r\n      this.find();\r\n    },\r\n    change(checkList) {\r\n      // console.log(checkList);\r\n      //  console.log(123);\r\n      //#region  编码生成规则\r\n      var sun = \"\";\r\n      var sun2 = \"\";\r\n      for (var s in checkList) {\r\n        console.log(checkList[s]);\r\n        switch (checkList[s]) {\r\n          case \"YYYY\":\r\n            sun += \"年\";\r\n            sun2 += \"YYYY\";\r\n            break;\r\n          case \"MM\":\r\n            sun += \"月\";\r\n            sun2 += \"MM\";\r\n            break;\r\n          case \"DD\":\r\n            sun += \"日\";\r\n            sun2 += \"DD\";\r\n            break;\r\n          case \"HH\":\r\n            sun += \"时\";\r\n            sun2 += \"HH\";\r\n            break;\r\n          case \"F\":\r\n            sun += \"分\";\r\n            sun2 += \"MM\";\r\n            break;\r\n          case \"SS\":\r\n            sun += \"秒\";\r\n            sun2 += \"SS\";\r\n            break;\r\n        }\r\n      }\r\n      console.log(sun + \"\" + sun2);\r\n      this.formInline1.en_time = sun;\r\n      this.formInline1.en_rules = \"\";\r\n      this.formInline1.en_rules += this.formInline1.en_prefix;\r\n      //     console.log(this.formInline.en_rules);\r\n      this.formInline1.en_rules += sun2;\r\n      //   console.log(this.formInline.en_rules);\r\n      var su = 0;\r\n      su = this.formInline1.en_num;\r\n      for (var i = 1; i < su; i++) {\r\n        this.formInline1.en_rules += \"0\";\r\n      }\r\n      this.formInline1.en_rules += \"1\";\r\n      //  console.log(this.formInline.en_rules);\r\n      //  console.log(this.formInline.en_num);\r\n      //#endregion\r\n      //#region   预览\r\n      var today = new Date(); //获取当前时间\r\n      var year = today.getFullYear(); //获取年份\r\n      var month = today.getMonth() + 1; //获取月份\r\n      var day = today.getDate(); //获取日期\r\n      var hours = today.getHours(); //获取时\r\n      var minutes = today.getMinutes(); //获得分钟\r\n      var Seconds = today.getSeconds(); //获得秒\r\n      if (Seconds <= 9) {\r\n        Seconds = \"0\" + Seconds;\r\n      }\r\n      //console.log(\"年\"+year + \"月\" + month + \"日\" + day+\"时\"+hours+\"分\"+minutes+\"秒\"+Seconds);\r\n      this.yulan = this.formInline1.en_prefix;\r\n\r\n      var chaifen = sun.split(\"\");\r\n      for (var s in chaifen) {\r\n        switch (chaifen[s]) {\r\n          case \"年\":\r\n            this.yulan += year;\r\n            break;\r\n          case \"月\":\r\n            this.yulan += month;\r\n            break;\r\n          case \"日\":\r\n            this.yulan += day;\r\n            break;\r\n          case \"时\":\r\n            this.yulan += hours;\r\n            break;\r\n          case \"分\":\r\n            this.yulan += minutes;\r\n            break;\r\n          case \"秒\":\r\n            this.yulan += Seconds;\r\n            break;\r\n        }\r\n        console.log(this.checkList);\r\n      }\r\n\r\n      var b = 0; //获取流水号  如:01  001\r\n      b = this.formInline1.en_num;\r\n      for (var b = 1; b < su; b++) {\r\n        this.yulan += \"0\";\r\n        console.log(\"进来了\" + b);\r\n      }\r\n      this.yulan += \"1\";\r\n      //#endregion\r\n    },\r\n    //刷新table\r\n    flushed() {\r\n      this.tableloading = true;\r\n      // 模拟获取接口数据\r\n      setTimeout(() => {\r\n        //调用find();\r\n        this.find();\r\n        this.tableloading = false;\r\n      }, 1000);\r\n      //直接this.查询方法();\r\n    },\r\n    //批量删除\r\n    delAll() {\r\n      alert(\"123\");\r\n      //   const length = this.multipleSelection.length;\r\n      //   for (let i = 0; i < length; i++) {\r\n      //     this.delarr.push(this.multipleSelection[i].PackingId)\r\n      //   }\r\n    },\r\n    filterTime(timestamp) {\r\n      return formatDate(timestamp);\r\n    },\r\n    handleClose(done) {\r\n      this.$confirm(\"确认关闭？\", \"提示\", {\r\n        confirmButtonText: \"确定\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      })\r\n        .then((_) => {\r\n          done();\r\n        })\r\n        .catch((_) => {});\r\n    },\r\n    cancelForm() {\r\n      this.dialogVisible = false;\r\n      this.checkList = [];\r\n    },\r\n  },\r\n  mounted() {\r\n    this.find();\r\n  },\r\n};\r\n</script>\r\n<style scoped src=\"../CSS/public.css\"></style>\r\n\r\n<style>\r\n#w {\r\n  margin-left: 20px;\r\n}\r\n\r\n#card {\r\n  height: 35px;\r\n  line-height: 35px;\r\n  margin-left: 20px;\r\n}\r\n\r\n#form {\r\n  margin-top: 15px;\r\n  width: 1020px;\r\n  box-shadow: 0px 1px 0px rgba(0, 0, 0, 0.2);\r\n  margin-left: 65px;\r\n}\r\n\r\n#bj {\r\n  width: 100%;\r\n}\r\n\r\n#form_top {\r\n  margin-right: 25px !important;\r\n  margin-bottom: 12px;\r\n}\r\n.el-drawer__header {\r\n  align-items: center;\r\n  color: #000 !important;\r\n  display: flex;\r\n  font-weight: bold;\r\n  margin-bottom: 32px;\r\n  padding: 10px 20px 0 !important;\r\n  box-shadow: 0px -1px 7px rgba(0, 0, 0, 0.2);\r\n  background-color: #fff;\r\n  height: 50px;\r\n}\r\n#didi {\r\n  position: absolute;\r\n  bottom: -0px;\r\n  box-shadow: 0px -1px 7px rgba(0, 0, 0, 0.2);\r\n  background-color: #fff;\r\n  width: 430px;\r\n  height: 60px;\r\n  text-align: center;\r\n  line-height: 60px;\r\n}\r\n#qx {\r\n  width: 150px;\r\n  height: 35px;\r\n  line-height: 35px;\r\n  padding: 0px !important;\r\n  background-color: #fff;\r\n  color: #000;\r\n  margin-left: 30px;\r\n}\r\n#tj {\r\n  width: 150px;\r\n  height: 35px;\r\n  line-height: 35px;\r\n  padding: 0px !important;\r\n  background-color: #9c27b0;\r\n  color: #fff;\r\n  margin-left: 50px;\r\n}\r\n\r\n.el-col-2 {\r\n  width: 30px;\r\n  text-align: center;\r\n}\r\n\r\n.el-form--inline .el-form-item__label {\r\n  float: none;\r\n  display: inline-block;\r\n  font-weight: bold;\r\n  font-size: 13px;\r\n}\r\n\r\n#tex {\r\n  width: 240px;\r\n  height: 32px;\r\n}\r\n\r\n#tex1 {\r\n  width: 28px !important;\r\n  color: #fff;\r\n  background-color: #409eff;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 20px;\r\n}\r\n\r\n#tex2 {\r\n  width: 28px !important;\r\n  color: #000;\r\n  background-color: #fff;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n}\r\n\r\n#tex3 {\r\n  border: 1px solid #add2fb;\r\n  color: #448ef8;\r\n  background-color: #eaf4fe;\r\n  width: 28px !important;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 20px;\r\n}\r\n\r\n#tex4 {\r\n  border: 1px solid #d7f4e1;\r\n  color: #8edfa8;\r\n  background-color: #ebf9f1;\r\n  width: 28px !important;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 20px;\r\n}\r\n#HE {\r\n  height: 500px;\r\n}\r\n\r\n#tex5 {\r\n  border: 1px solid #f9dcdc;\r\n  color: #f29895;\r\n  background-color: #fceeed;\r\n  width: 28px !important;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 20px;\r\n}\r\n\r\n#tex6 {\r\n  border: 1px solid #fae4a2;\r\n  color: #f8c341;\r\n  background-color: #fef8e8;\r\n  width: 28px !important;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 20px;\r\n}\r\n\r\n#tex7 {\r\n  border: 1px solid #d3d4d6;\r\n  color: #919398;\r\n  background-color: #f4f4f5;\r\n  width: 28px !important;\r\n  line-height: 28px !important;\r\n  width: 73px !important;\r\n  padding: 0px !important;\r\n  margin-left: 20px;\r\n}\r\n\r\n#tex3:hover {\r\n  background-color: #409eff;\r\n  color: #fff;\r\n}\r\n\r\n#tex4:hover {\r\n  background-color: #5fcb71;\r\n  color: #fff;\r\n}\r\n\r\n#tex5:hover {\r\n  background-color: #ff4949;\r\n  color: #fff;\r\n}\r\n\r\n#tex6:hover {\r\n  background-color: #f5bd41;\r\n  color: #fff;\r\n}\r\n\r\n#tex7:hover {\r\n  background-color: #919398;\r\n  color: #fff;\r\n}\r\n\r\n#an1 {\r\n  float: right;\r\n  position: relative;\r\n  top: 9px;\r\n  right: 64px;\r\n}\r\n\r\n.lyric-enter,\r\n.lyric-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(15px);\r\n}\r\n\r\n.lyric-enter-to,\r\n.lyric-leave {\r\n  opacity: 1;\r\n}\r\n\r\n.lyric-enter-active,\r\n.lyric-leave-active {\r\n  transition: all 0.4s ease-out;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}